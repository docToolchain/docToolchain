<!doctype html>
<html lang="de">
<head>
    
    <!-- sourceuri: 015_tasks/03_task_generateSite.html -->
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">

    <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
    <meta content="jbake" name="generator">
    <meta content="INDEX, FOLLOW" name="ROBOTS">

    <title>generateSite</title>
    <meta content="docToolchain" property="og:title">
    <meta content="build your dev docs the easy way..." property="og:description">
    <meta content="website" property="og:type">
    <meta content="docToolchain" property="og:site_name">
    <meta content="docToolchain" itemprop="name">
    <meta content="build your dev docs the easy way..." itemprop="description">
    <meta content="summary" name="twitter:card">
    <meta content="docToolchain" name="twitter:title">
    <meta content="build your dev docs the easy way..." name="twitter:description">

    <link as="style"
        href="../css/main.min.881fe5f7b53609f55ebfb496c7097c3b30b2e8ceb20a54bc6a48350ded67224f.css"
        rel="preload">
    <link href="../css/main.min.881fe5f7b53609f55ebfb496c7097c3b30b2e8ceb20a54bc6a48350ded67224f.css"
        integrity=""
        rel="stylesheet">
    <link href="../css/asciidoctor.css" rel="stylesheet">
    <link href="../css/prettify.css" rel="stylesheet">

    <!-- favicon generated with https://www.favicon-generator.org/ -->
    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="apple-touch-icon" sizes="57x57" href="../apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="../apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="../apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="../apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="../apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="../apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="../apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="../apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="../apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192" href="../android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
    <link rel="manifest" href="../manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="../ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">

    <script src="../js/jquery-3.5.1.min.js"></script>
    <style>
    div.bg-light {
        background-color: rgba(127, 180, 224, 0.3) !important;
    }

    /* for blog posts */
    span.blogtag {
        border-radius: 10px;
        background-color: #30638E;
        color: white;
        padding: 5px 10px;
    }

    span.blogblogtag a {
        color: white;
        padding: 0
    }

    span.blogtag span {
        margin-left: 10px;
        border-radius: 10px;
        background-color: white;
        color: #30638E;
    }

    div.td-toc {
        height: calc(100vh - 5rem) !important;
    }

    div#toctitle {
        display: none
    }

    #td-section-nav {
        max-height: calc(100vh - 4rem);
        font-size: smaller;
        line-height: 1.1;
    }

    .td-page-meta {
        font-size: smaller;
        line-height: 1.1;
    }

    #td-section-nav ul.td-sidebar-nav__section {
        padding-left: 0;
    }

    span.navbar-logo {
        padding-right: 1.5em;
    }

    .match {
        font-size: smaller;
    }

    .admonitionblock td.icon .fa:before {
        font-size: xxx-large;
    }
    </style>

    <style>
    div.openblock.primary div.content, div.openblock.secondary div.content {
        border: 1px solid #7a2518;
        padding: 5px;
    }

    div.openblock.primary div.content div.content, div.openblock.secondary div.content div.content {
        border: 0 solid #7a2518;
        padding: 0;
    }

    .hidden {
        display: none;
    }

    .switch {
        border-width: 1px 1px 0 1px;
        border-style: solid;
        border-color: #7a2518;
        display: inline-block;
    }

    .switch--item {
        padding: 2px 10px;
        background-color: #ffffff;
        color: #7a2518;
        display: inline-block;
        cursor: pointer;
    }

    .switch--item:not(:first-child) {
        border-width: 0 0 0 1px;
        border-style: solid;
        border-color: #7a2518;
    }

    .switch--item.selected {
        background-color: #7a2519;
        color: #ffffff;
    }
    </style>

    <!-- copy-n-paste.js -->
    <style>
        div.listingblock {
            position: relative;
        }
        div.listingblock > span.icon {
            position: absolute;
            top: 2px;
            right: 6px;
            visibility: hidden;
            z-index: 2;
            cursor: pointer;
        }
        div.listingblock:hover > span.icon {
            visibility: visible;
        }
        div.listingblock div.content pre {
            margin: 0;
        }
    </style>
    <style>
        .td-sidebar-nav__section {
            padding-left: 9px;
        }
        details {
            margin-left: 10px;
        }
        summary {
            cursor: pointer;
            padding-left: 10px; /* Erhöhter linker Padding für den Pfeil */
            list-style: none;
            position: relative; /* Für absolute Positionierung des Pfeils */
        }
        summary::before {
            content: '>';
            position: absolute;
            left: 10px; /* Position des Pfeils */
            top: 50%;
            transform: translateY(-50%) translateX(-120%);
            transition: transform 0.3s;
        }
        details[open] > summary::before {
            transform: translateY(-50%) translateX(-120%) rotate(90deg);
        }
    </style>
</head>

<body onload="prettyPrint()" class="td-section">
<header>
	
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
    <a class="navbar-brand" href="../index.html">
        <span class="navbar-logo"><img src="../images/doctoolchain-logo-blue.png" alt="docToolchain" width="32px" /></span><span
            class="font-weight-bold">docToolchain</span>
    </a>
    <div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
        <ul class="navbar-nav mt-2 mt-lg-0">
    <li class="nav-item mr-4 mb-2 mb-lg-0"><!--img src="../images/status.png" alt="status" width="16" height="16" onerror="this.style.display='none'"--></li>

            <li class="nav-item mr-4 mb-2 mb-lg-0">
                <a class="nav-link " href="../10_about/10_about-the-project.html"><span>About</span></a>
            </li>

            <li class="nav-item mr-4 mb-2 mb-lg-0">
                <a class="nav-link " href="../010_manual/20_install.html"><span>User Docs</span></a>
            </li>

            <li class="nav-item mr-4 mb-2 mb-lg-0">
                <a class="nav-link active" href="../015_tasks/03_tasks.html"><span>Tasks</span></a>
            </li>

            <li class="nav-item mr-4 mb-2 mb-lg-0">
                <a class="nav-link " href="../020_tutorial/010_Install.html"><span>Tutorial</span></a>
            </li>

            <li class="nav-item mr-4 mb-2 mb-lg-0">
                <a class="nav-link " href="../025_development/005_contributing_to_docs.html"><span>For Devs</span></a>
            </li>

            <li class="nav-item mr-4 mb-2 mb-lg-0">
                <a class="nav-link " href="../030_news/index.html"><span>News</span></a>
            </li>

        </ul>
    </div>
    <div class="navbar-nav d-none d-lg-block" >
        <form action="../search.html">
        <input aria-label="Search this site…" autocomplete="off" class="form-control td-search-input"
               placeholder=" Search this site…" type="search" name="q">
        </form>
    </div>
</nav>

</header>
<div class="container-fluid td-outer">
	<div class="td-main">
		<div class="row flex-xl-nowrap">
			<div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
				<div class="td-sidebar__inner" id="td-sidebar-menu" >
					

        <form class="td-sidebar__search d-flex align-items-center d-lg-none" action="../search.html">

            <input aria-label="Search this site…" name="q" autocomplete="off" class="form-control td-search-input"
                   placeholder=" Search this site…" type="search">


            <button aria-controls="td-docs-nav" aria-expanded="false"
                    aria-label="Toggle section navigation" class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" data-target="#td-section-nav"
                    data-toggle="collapse" type="button">
            </button>
        </form>

        <nav aria-label="Submenu" class="collapse td-sidebar-nav" id="td-section-nav" >

            <ul class="td-sidebar-nav__section">
                <li class="td-sidebar-nav__section-title">
                    <span class="align-left pl-0 pr-2 pt-2 active td-sidebar-link td-sidebar-link__section">Tasks</span>
                </li>
                <li>
                  <ul>
                      <li class="collapse show" id="docs">
                          
                        <ul class="td-sidebar-nav__section ul-0">
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../015_tasks/03_tasks.html" title="What Is a Task?">What Is a Task?</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../015_tasks/03_task_autobuildSite.html" title="autobuildSite">autobuildSite</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../015_tasks/03_task_collectIncludes.html" title="collectIncludes">collectIncludes</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../015_tasks/03_task_convertToDocx.html" title="convertToDocx">convertToDocx</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../015_tasks/03_task_convertToEpub.html" title="convertToEpub">convertToEpub</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../015_tasks/03_task_copy_themes.html" title="copyThemes">copyThemes</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../015_tasks/03_task_createReferenceDoc.html" title="createReferenceDoc">createReferenceDoc</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../015_tasks/03_task_dependencyUpdates.html" title="dependencyUpdates">dependencyUpdates</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../015_tasks/03_task_downloadTemplate.html" title="downloadTemplate">downloadTemplate</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../015_tasks/03_task_exportChangeLog.html" title="exportChangeLog">exportChangeLog</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../015_tasks/03_task_exportConfluence.html" title="exportConfluence">exportConfluence</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../015_tasks/03_task_exportContributors.html" title="exportContributors">exportContributors</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../015_tasks/03_task_exportDrawIo.html" title="exportDrawIo">exportDrawIo</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../015_tasks/03_task_exportEA.html" title="exportEA">exportEA</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../015_tasks/03_task_exportExcel.html" title="exportExcel">exportExcel</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../015_tasks/03_task_exportJiraIssues.html" title="exportJiraIssues">exportJiraIssues</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../015_tasks/03_task_exportJiraSprintChangelog.html" title="exportJiraSprintChangelogIssues">exportJiraSprintChangelogIssues</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../015_tasks/03_task_exportMarkdown.html" title="exportMarkdown">exportMarkdown</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../015_tasks/03_task_exportMetrics.html" title="exportMetrics">exportMetrics</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../015_tasks/03_task_exportOpenApi.html" title="exportOpenAPI">exportOpenAPI</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../015_tasks/03_task_exportPPT.html" title="exportPPT">exportPPT</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../015_tasks/03_task_exportStructurizr.html" title="exportStructurizr">exportStructurizr</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../015_tasks/03_task_exportVisio.html" title="exportVisio">exportVisio</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../015_tasks/03_task_fixencoding.html" title="fixEncoding">fixEncoding</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../015_tasks/03_task_generateContent.html" title="generateContent">generateContent</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../015_tasks/03_task_generateDeck.html" title="generateDeck">generateDeck</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../015_tasks/03_task_generateDocBook.html" title="generateDocbook">generateDocbook</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../015_tasks/03_task_generateHTML.html" title="generateHTML">generateHTML</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../015_tasks/03_task_generatePDF.html" title="generatePDF">generatePDF</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section active"
                                   href="../015_tasks/03_task_generateSite.html" title="generateSite">generateSite</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../015_tasks/03_task_htmlSanityCheck.html" title="htmlSanityCheck">htmlSanityCheck</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../015_tasks/03_task_prependFilename.html" title="prependFilename">prependFilename</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../015_tasks/03_task_previewSite.html" title="previewSite">previewSite</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../015_tasks/03_task_publishToConfluence.html" title="publishToConfluence">publishToConfluence</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../015_tasks/03_task_wipeConfluenceSpace.html" title="wipeConfluenceSpace">wipeConfluenceSpace</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../015_tasks/150_task_createTask.html" title="createTask">createTask</a>
                                
                            </li>
                        </ul>
                      </li>
                  </ul>
                <li>
        </nav>

				</div>
			</div>
			<div class="d-none d-xl-block col-xl-2 td-toc d-print-none">
				<div class="td-page-meta ml-2 pb-1 pt-2 mb-0">
					

        <a href="https://github.com/doctoolchain/doctoolchain/edit/ng/src/docs/015_tasks/03_task_generateSite.adoc"
           target="_blank"><i class="fa fa-edit fa-fw"></i> Improve this doc</a>


        <a href="https://github.com/docToolchain/docToolchain/issues/new?title=Docs%3A+Feedback+for+%27generateSite%27&body=%0A%0A%5BEnter%20feedback%20here%5D%0A%0A%0A---%0A%23page:%20https://github.com/doctoolchain/doctoolchain/edit/ng/src/docs/015_tasks/03_task_generateSite.adoc%0A%23branch:%20ng" target="_blank"><i
                class="fab fa-github fa-fw"></i> Create an issue</a>

        
        
        <hr />
<script>
const issuesBaseUrl = "https://api.github.com/repos/doctoolchain/doctoolchain/issues";
const searchTerm = "015_tasks/03_task_generateSite.adoc";
</script>

<script src="../js/issues.js"></script>

<style>
        #issues-container {
            background-color: white;
            padding: 0px;
            margin: 0;
        }
        .issue {
            display: flex;
            align-items: flex-start;
            margin-bottom: 5px;
            padding-bottom: 5px;
            border-bottom: 1px solid #eee;
        }
        .issue:last-child {
            border-bottom: none;
        }
        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin-right: -10px;
        }
        .issue-content {
            flex-grow: 1;
            background-color: rgba(255,255,255,0.6);
        }
        .issue-title {
            font-weight: bold;
            color: #0366d6;
        }
        .issue-date {
            font-size: 0.9em;
            color: #586069;
        }

</style>

<div id="issues-container">
searching issues...
</div>

        <hr />

        <div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#task_generatesite">generateSite</a>
<ul class="sectlevel2">
<li><a href="#_about_this_task">About This Task</a></li>
<li><a href="#_pages">Pages</a></li>
<li><a href="#config">Configuration</a></li>
<li><a href="#_templates_and_style">Templates and Style</a></li>
<li><a href="#_landing_page">Landing Page</a></li>
<li><a href="#_blog">Blog</a></li>
<li><a href="#_search">Search</a></li>
<li><a href="#_cicd">CI/CD</a></li>
<li><a href="#_further_reading_and_resources">Further Reading and Resources</a></li>
<li><a href="#_source">Source</a></li>
</ul>
</li>
</ul>
</div>


<div style="border: 1px solid #8e3063; border-radius: 3px; padding: 5px; margin-top: 10px;">
    <span style="font-size:x-small; display: block; text-align: right;">Anzeige</span><br />
    <b>Wissen,<br />direkt von der Quelle!</b><br /><br />
    Wir bieten ein remote Docs-as-Code Training unter Verwendung von docToolchain an.<br /><br />
    <a href="https://www.socreatory.com/de/trainings/docascode">Nächster Termin: 28.-29.10.2024</a><br />
    <a href="https://www.socreatory.com/de/trainings/docascode" class="btn btn-primary" style="">jetzt buchen!</a>
</div>


				</div>
			</div>
			<main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
				    <nav aria-label="breadcrumb" class="d-none d-md-block d-print-none">
        <ol class="breadcrumb spb-1">
            <!--li aria-current="page" class="breadcrumb-item active">
                <a href="https://example.docsy.dev/docs/">Documentation</a>
            </li-->

        </ol>
    </nav>


    <div class="td-content">
        <p>
            
<style>
.gravatar img {
    margin-left: 3px;
    border-radius: 4px;
}
</style>
<div class="sect1">
<h2 id="task_generatesite">generateSite</h2>
<div class="sectionbody">
<div class="paragraph">
<p><span class="image gravatar"><img src="https://www.gravatar.com/avatar/2d7d4905cb126f17594f25175a5ef086?d=identicon" alt="Timo Abele" width="32" height="32" title="Timo Abele"></span> <span class="image gravatar"><img src="https://www.gravatar.com/avatar/a1a5917e47cadf234366c3e3beef39b6?d=identicon" alt="Johannes Thorn" width="32" height="32" title="Johannes Thorn"></span> <span class="image gravatar"><img src="https://www.gravatar.com/avatar/c9b0a22075cd70224fd219e3257a8ce0?d=identicon" alt="Jeremie Bresson" width="32" height="32" title="Jeremie Bresson"></span> <span class="image gravatar"><img src="https://www.gravatar.com/avatar/c3a42a44fe24014c947ff435ca206081?d=identicon" alt="Jody Winter" width="32" height="32" title="Jody Winter"></span> <span class="image gravatar"><img src="https://www.gravatar.com/avatar/eedf6f2d4b31cc4e49a7aa4fc55f51d3?d=identicon" alt="Ralf D. Müller" width="32" height="32" title="Ralf D. Müller"></span> <span class="image gravatar"><img src="https://www.gravatar.com/avatar/70d15b356579ae85bc72b68af52946c2?d=identicon" alt="Schrotti" width="32" height="32" title="Schrotti"></span> <span class="image gravatar"><img src="https://www.gravatar.com/avatar/cc5f3bf8b3cb91c985ed4fd046aa451d?d=identicon" alt="Ralf D. Müller" width="32" height="32" title="Ralf D. Müller"></span></p>
</div>
<div class="literalblock">
<div class="content">
<pre>8 minutes to read</pre>
</div>
</div>
<div class="sect2">
<h3 id="_about_this_task">About This Task</h3>
<div class="paragraph">
<p>When you have only one document, the output of <code>generateHTML</code> might meet your requirements.
But as your documentation grows, and you have multiple documents, you will need a microsite which bundles all the information.
The <code>generateSite</code> task uses <a href="https://jbake.org">jBake</a> to create a static site with a landing page, a blog and search.</p>
</div>
</div>
<div class="sect2">
<h3 id="_pages">Pages</h3>
<div class="paragraph">
<p>The microsite is page-oriented, not document-oriented.
If you have already organized your documents by chapter, use them as pages to create a great user experience.
The arc42-template sources are a good example.</p>
</div>
<div class="paragraph">
<p>To include a page in the microsite, add a metadata header to it.</p>
</div>
<div class="listingblock">
<div class="title">page metadata</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="asciidoc">:jbake-menu: arc42
:jbake-title: Solution Strategy
:jbake-order: 4
:jbake-type: page_toc
:jbake-status: published
:filename: 015_tasks/03_task_generateSite.adoc

:toc:

[[section-solution-strategy]]
=== Solution Strategy</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here is an overview of each element:</p>
</div>
<div class="paragraph">
<p><strong>jbake-menu</strong></p>
</div>
<div class="paragraph">
<p>The top-level menu&#8217;s code for this page.
Defaults to the top-level folder name (without the order prefix) of the .adoc file within the <code>docDir</code>.
Example: if the top-level folder name is <code>10_news</code> it will default to the value <code>news</code>.</p>
</div>
<div class="paragraph">
<p>For each code, the display text and the order in the top-level menu can be <a href="#top-menu-config">configured</a>.</p>
</div>
<div class="paragraph">
<p><strong>jbake-title</strong></p>
</div>
<div class="paragraph">
<p>The title to be displayed in the drop-down top-level menu.
Defaults to the first headline of the file.</p>
</div>
<div class="paragraph">
<p><strong>jbake-order</strong></p>
</div>
<div class="paragraph">
<p>Applies a sort order to drop-down entries.
Defaults to a prefixed file number, such as <code><strong>04</strong>_filename.adoc</code> or to the prefixed number of the second-level folder name.
When nothing is defined the default value is <code>-1</code> or <code>-987654321</code> for <code>index</code> pages.</p>
</div>
<div class="paragraph">
<p><strong>jbake-type</strong></p>
</div>
<div class="paragraph">
<p>The page type.
Controls which template is used to render the page.
You will mostly use <code>page</code> for a full-width page or <code>page_toc</code> for a page with a table of contents (toc) rendered on the left.
Defaults to <code>page_toc</code>.</p>
</div>
<div class="paragraph">
<p><strong>jbake-status</strong></p>
</div>
<div class="paragraph">
<p>Either <code>draft</code> or <code>published</code>.
Only <code>published</code> pages will be rendered.
Defaults to <code>published</code> for files with a <code>jbake-order</code> and <code>draft</code> for files without <code>jbake-order</code> or files prefixed with <code>_</code>.</p>
</div>
<div class="paragraph">
<p><strong>filename</strong></p>
</div>
<div class="paragraph">
<p>Required for edit and feedback links (coming soon).
Defaults to the filename :-).</p>
</div>
<div class="paragraph">
<p><strong>ifndef</strong></p>
</div>
<div class="paragraph">
<p>Fixes the imagesdir according to the nesting level of your docs folder.
Defaults to the main <code>docDir/images</code>.</p>
</div>
<div class="paragraph">
<p><strong>toc</strong></p>
</div>
<div class="paragraph">
<p>For <code>:jbake-type: page_toc</code>, you need this line to generate the toc.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Start your pages with a <code>==</code> level headline.
You can fix the level offset when you include the page in a larger document with <code>include::chapter.adoc[leveloffset=+1]</code>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="config">Configuration</h3>
<div class="paragraph">
<p>The configuration follows the <em>convention-over-configuration</em> approach.
If you follow the conventions, you don&#8217;t have to configure anything.
But if you want to, you can override the convention behaviour with a configuration.</p>
</div>
<div class="sect3">
<h4 id="_menu">Menu</h4>
<div class="sect4">
<h5 id="_navigation_elements">Navigation elements</h5>
<div class="paragraph">
<p>The navigation is organized with following elements:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A top level menu.</p>
</li>
<li>
<p>For each item of this top level menu, a section sidebar on the left.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The location of a page in the top-level menu and in the section sidebar depends on:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Its location in the folder structure</p>
</li>
<li>
<p>Page attributes</p>
</li>
<li>
<p>Site configurations</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code>src/docs/
├── 10_foo
│   ├── 10_first.adoc
│   └── 20_second.adoc
└── 20_bar
    ├── 10_lorem.adoc
    ├── 20_ipsum
    │   ├── 10_topic-A.adoc
    │   └── 20_topic-B.adoc
    └── 30_delis
        ├── 10_one.adoc
        ├── 20_two.adoc
        └── index.adoc</code></pre>
</div>
</div>
<div class="paragraph">
<p>The top level folders (<code>10_foo</code> and <code>20_bar</code>) are used to determine to which menu-code the page belongs (<code>foo</code> and <code>bar</code>, unless overridden by the <code>:jbake-menu:</code> inside each page).</p>
</div>
<div class="paragraph">
<p>In the section sidebar, the navigation tree is determined by the folder structure.
Folders are nodes in the sidebar tree.
Each node can contain pages (leafs) or other folders (child nodes).
The order is controlled by the prefix of the file or folder name (unless overridden by the <code>:jbake-order:</code> inside each page).</p>
</div>
<div class="paragraph">
<p>When an index page is present (like <code>20_bar/30_delis/index.adoc</code> in the example) then the navigation tree node corresponds to this index page (you can click on it and the title is taken from the page).
When this <code>index.adoc</code> does not declare a specific order with <code>:jbake-order:</code> then the order of the parent folder (for the example: <code>30</code> because the folder is named <code>30_delis</code>).</p>
</div>
<div class="paragraph">
<p>When the index page is absent (like there is no <code>20_bar/20_ipsum/index.adoc</code> in the example) then the name of the folder is used to create the node, and you can not click on the node because no pages is associated with this node.
You can still define the order with the name (for the example <code>20</code> because the folder is named <code>20_ipsum</code>).</p>
</div>
<div class="paragraph">
<p>When there is no sub-folder, only a flat list of pages is created.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
When an <code>index.adoc</code> page is defined inside the top level folder (like: <code>10_foo/index.adoc</code> or <code>20_bar/index.adoc</code>) then the page will be listed in the section navigation tree in the sidebar as any other regular page. By default, it will be the first element of the tree, unless the value is overridden by a <code>:jbake-order:</code> attribute.
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="top-menu-config">Configuring the top level menu</h5>
<div class="paragraph">
<p>The <code>:jbake-menu:</code> is only the code for the menu entry to be created.
You can map these codes to menu entries through the configuration (<code>microsite</code>-Section) in the following way:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="groovy">menu = [code1: 'Some Title 1', code2: 'Other Title 2', code3: '-']</code></pre>
</div>
</div>
<div class="paragraph">
<p>When no mapping is defined in the configuration file, the code is used as title.</p>
</div>
<div class="paragraph">
<p>The menu configuration is also impacting the display order.</p>
</div>
<div class="paragraph">
<p>If you have four files, located in following folder structure:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code>src/docs
├── code1
│   ├── demo1.adoc
│   └── demo2.adoc
└── code3
    ├── demo3.adoc
    └── _demo4.adoc</code></pre>
</div>
</div>
<div class="paragraph">
<p>Where <code>demo1.adoc</code> and <code>demo3.adoc</code> contain no <code>:jbake-menu:</code> header, <code>demo2.adoc</code> contains <code>:jbake-menu: code2</code>, then:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>demo1.adoc</code> will have a menu-code of <code>code1</code> because it is located in the folder <code>code1</code>.
This code is translated through the configuration to the menu named <code>Some Title 1</code>.</p>
</li>
<li>
<p><code>demo2.adoc</code> is in the same folder, but the <code>:jbake-menu:</code> attribute has a higher precedence which results in menu-code <code>code2</code>.
This code is translated through the configuration to the menu named <code>Other Title 2</code>.</p>
</li>
<li>
<p><code>demo3.adoc</code> will have a menu-code <code>code3</code> because it is located in the folder <code>code3</code>.
This code is translated through the configuration to the special menu <code>-</code> which will not be displayed.
This is an easy way to hide a menu in the rendered microsite.</p>
</li>
<li>
<p><code>_demo4.adoc</code> starts with an underscore <code>_</code> and thus will be handled as <code>draft</code> (<code>:jbake-status: draft</code>).
It will not be rendered as part of any menu, but it will be available in the microsite as "hidden" <code>_demo4-draft.html</code>.
Feel free to remove these draft renderings before you publish your microsite.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_links">Links</h4>
<div class="paragraph">
<p>In the column on the right, links are driven by the values defined in <code>docToolchainConfig.groovy</code>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>"Improve this doc": displayed when <code>gitRepoUrl</code> is set.</p>
</li>
<li>
<p>"Create an issue": displayed when <code>issueUrl</code> is set.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_configuring_the_jbake_plugin">Configuring the JBake plugin</h4>
<div class="paragraph">
<p>Behind the scene the <code>generateSite</code> task is relying on Jbake.</p>
</div>
<div class="paragraph">
<p>In the <code>docToolchainConfig.groovy</code> it is possible to amend the configuration of the jbake gradle plugin:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Add additional asciidoctorj plugins (add dependencies to the <code>jbake</code> configuration)</p>
</li>
<li>
<p>Add additional asciidoctor attributes</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">jbake configuration</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="groovy">//customization of the Jbake gradle plugin used by the generateSite task
jbake.with {
    // possibility to configure additional asciidoctorj plugins used by jbake
    plugins = [ ]

    // possibiltiy to configure additional asciidoctor attributes passed to the jbake task
    asciidoctorAttributes = [ ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The plugins are retrieved from a repository (by default maven-central) configured with project property <code>depsMavenRepository</code>.
When a repository requiring credentials is used the properties <code>depsMavenUsername</code> and <code>depsMavenPassword</code> can be set as well.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_templates_and_style">Templates and Style</h3>
<div class="paragraph">
<p>The jBake templates and CSS are hidden for convenience.</p>
</div>
<div class="paragraph">
<p>The basic template uses <a href="http://getbootstrap.com/">Twitter Bootstrap 5</a> as its CSS framework.
Use the <a href="03_task_copy_themes.html"><code>copyThemes</code></a> task to copy all hidden jBake resources to your project.
You can then remove the resources you don&#8217;t need, and change those you want to change.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<code>copyThemes</code> overwrites existing files, but because your code is safely managed using version control, this shouldn&#8217;t be a problem.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_landing_page">Landing Page</h3>
<div class="paragraph">
<p>Place an <code>index.gsp</code> page as your landing page in <code>src/site/templates</code>.
This landing page is plain HTML5 styled with Twitter Bootstrap.
The page header and footer are added by docToolchain.
An example can be found at <a href="03_task_copy_themes.html"><code>copyThemes</code></a> or <a href="https://github.com/docToolchain/docToolchain/blob/ng/src/site/templates/index.gsp">on GitHub</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_blog">Blog</h3>
<div class="paragraph">
<p>The microsite also contains a simple but powerful blog.
Use it to inform your team about changes, as well as architecture decision records (ADRs).</p>
</div>
<div class="paragraph">
<p>To create a new blog post, create a new file in <code>src/docs/blog/&lt;year&gt;/&lt;post-name&gt;.adoc</code> with the following template:</p>
</div>
<div class="listingblock">
<div class="title">blog post template</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="asciidoc">:jbake-title: &lt;title-of your post&gt;
:jbake-date: &lt;date formatted as 2021-02-28&gt;
:jbake-type: post
:jbake-tags: &lt;blog, asciidoc&gt;
:jbake-status: published

:imagesdir: ../../images

= {jbake-title}
{jbake-author}
{jbake-date}

&lt;insert your text here&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_search">Search</h3>
<div class="paragraph">
<p>The microsite does not have its own local search.
But it does have a search input field which can be used to link to another search engine.</p>
</div>
</div>
<div class="sect2">
<h3 id="_cicd">CI/CD</h3>
<div class="paragraph">
<p>When running in an automated build, set the environment variable <code>DTC_HEADLESS</code> to <code>true</code> or <code>1</code>. This stops docToolchain from asking to install the configured theme, and it will simply assume that you do want to install it.
You can also avoid the theme downloading with every build by copying the themes folder from <code>$HOME/.doctoolchain/themes</code> to the corresponding folder in your build container.</p>
</div>
</div>
<div class="sect2">
<h3 id="_further_reading_and_resources">Further Reading and Resources</h3>
<div class="paragraph">
<p>Read about the <code>previewSite</code> task <a href="03_task_previewSite.html">here.</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_source">Source</h3>
<details>
<summary class="title">Show source code of <code>scripts/generateSite.gradle</code> or go directly to <a href="https://github.com/docToolchain/docToolchain/blob/ng/scripts/generateSite.gradle" target="_blank" rel="noopener">GitHub · docToolchain/scripts/generateSite.gradle</a>.</summary>
<div class="content">
<div class="listingblock">
<div class="title">scripts/generateSite.gradle</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="groovy">import groovy.util.*
import static groovy.io.FileType.*

buildscript {
    repositories {
        maven {
            credentials {
                username mavenUsername
                password mavenPassword
            }
            url mavenRepository
        }
    }
    dependencies {
        classpath libs.asciidoctorj.diagram
    }
}
repositories {
    maven {
        credentials {
            username depsMavenUsername
            password depsMavenPassword
        }
        url depsMavenRepository
    }
}
dependencies {
    jbake libs.asciidoctorj.diagram
    jbake libs.pebble
    config.jbake.plugins.each { plugin -&gt;
        jbake plugin
    }
}

apply plugin: 'org.jbake.site'

def color = { color, text -&gt;
    def colors = [black: 30, red: 31, green: 32, yellow: 33, blue: 34, magenta: 35, cyan: 36, white: 37]
    return new String((char) 27) + "[${colors[color]}m${text}" + new String((char) 27) + "[0m"
}

jbake {
    version = '2.6.7'
    srcDirName = "${targetDir}/microsite/tmp/site"
    destDirName = "${targetDir}/microsite/output"
    configuration['asciidoctor.option.requires'] = "asciidoctor-diagram"
    config.microsite.each { key, value -&gt;
        configuration['site.'+key-'config.microsite.'] = value?:''
        //println 'site.'+key-'config.microsite.' +" = "+ value
    }

    def micrositeContextPath = config.microsite.contextPath?:'/'

    configuration['asciidoctor.attributes'] = [
        "sourceDir=${targetDir}",
        'source-highlighter=prettify@',
        //'imagesDir=../images@',
        "imagesoutDir=${targetDir}/microsite/output/images@",
        "imagesDir=${micrositeContextPath.endsWith('/') ? micrositeContextPath : micrositeContextPath.concat('/')}images@",
        "targetDir=${targetDir}",
        "docDir=${docDir}",
        "projectRootDir=${new File(docDir).canonicalPath}@",
    ]
    if(config.jbake.asciidoctorAttributes) {
        config.jbake.asciidoctorAttributes.each { entry -&gt;
            configuration['asciidoctor.attributes'] &lt;&lt; entry
        }
    }

}

def prepareAndCopyTheme = {
    //copy internal theme
    println "copy internal theme ${new File(projectDir, 'src/site').canonicalPath}"
    copy {
        from('src/site')
        into("${targetDir}/microsite/tmp/site")
    }
    //check if a remote pdfTheme is defined
    def siteTheme = System.getenv('DTC_SITETHEME')?:""
    def themeFolder = new File(projectDir, "../themes/" + siteTheme.md5())
    try {
        if (siteTheme) {
            println "use siteTheme $siteTheme"
            //check if it is already installed
            if (!themeFolder.exists()) {
                if (System.getenv('DTC_HEADLESS')) {
                    ant.yesno = "y"
                } else {
                    println "${color 'green', """\nTheme '$siteTheme' is not installed yet. """}"
                    def input = ant.input(message: """
${color 'green', 'do you want me to download and install it to '}
${color 'green', '   ' + themeFolder.canonicalPath}
${color 'green', 'for you?'}\n""",
                        validargs: 'y,n', addproperty: 'yesno')
                }
                if (ant.yesno == "y") {
                    themeFolder.mkdirs()
                    download.run {
                        src siteTheme
                        dest new File(themeFolder, 'siteTheme.zip')
                        overwrite true
                    }
                    copy {
                        from zipTree(new File(themeFolder, 'siteTheme.zip'))
                        into themeFolder
                    }
                    delete {
                        delete new File(themeFolder, 'siteTheme.zip')
                    }

                } else {
                    println "${color 'green', """\nI will continue without the theme for now... """}"
                    siteTheme = ""
                }

            }
            //copy external theme
            if (siteTheme) {
                copy {
                    from(themeFolder) {}
                    into("${targetDir}/microsite/tmp/")
                }
                //check if the config has to be updated
                // check if config still contains /** microsite **/
                def configFile = new File(docDir, mainConfigFile)
                def configFileText = configFile.text
                if (configFileText.contains("/** start:microsite **/")) {
                    def configFragment = new File(targetDir,'/microsite/tmp/site/configFragment.groovy')
                    if (configFragment.exists()) {
                        println "${color 'green', """
    It seems that this theme is used for the first time in this project.
    Let's configure it!
    If you are unsure, change these settings later in your config file
    $configFile.canonicalPath
    """}"
                        def comment = ""
                        def conf = ""
                        def example = ""
                        def i = 0
                        configFragment.eachLine { line -&gt;
                            if (line.trim()) {
                                if (line.startsWith("//")) {
                                    conf += "    " + line + "\n"
                                    def tmp = line[2..-1].trim()
                                    comment += color('green', tmp) + "\n"
                                    if (tmp.toLowerCase().startsWith("example")) {
                                        example = tmp.replaceAll("[^ ]* ", "")
                                    }
                                } else {
                                    //only prompt if there is something to prompt
                                    if (line.contains("##")) {
                                        def property = line.replaceAll("[ =].*", "")
                                        if (!example) {
                                            example = config.microsite[property]
                                        }
                                        comment = color('blue', "$property") + "\n" + comment
                                        if (example) {
                                            ant.input(message: comment,
                                                addproperty: 'res' + i, defaultvalue: example)
                                        } else {
                                            ant.input(message: comment,
                                                addproperty: 'res' + i)
                                        }
                                        (comment, example) = ["", ""]
                                        line = line.replaceAll("##.+##", ant['res' + i])
                                        conf += "    " + line + "\n"
                                        i++
                                    } else {
                                        conf += "    " + line + "\n"
                                    }
                                }
                            } else {
                                conf += "\n"
                            }
                        }
                        configFile.write(configFileText.replaceAll("(?sm)/[*][*] start:microsite [*][*]/.*/[*][*] end:microsite [*][*]/", "%%marker%%").replace("%%marker%%", conf))
                        println color('green', "config written\nopen ${targetDir}/microsite/output/index.html in your browser\nto see your microsite!")
                    }
                    //copy the dummy docs (blog, landing page) to the project repository
                    copy {
                        from(new File(themeFolder, 'site/doc')) {}
                        into(new File(docDir, inputPath))
                    }
                }
            }
        }
    } catch (Exception e) {
        println color('red', e.message)
        if (e.message.startsWith("Not Found")) {
            themeFolder.deleteDir()
            throw new GradleException("Couldn't find theme. Did you specify the right URL?\n"+e.message)
        } else {
            throw new GradleException(e.message)
        }
    }
    //copy project theme
    if (config.microsite.siteFolder) {
        def projectTheme = new File(new File(docDir, inputPath), config.microsite.siteFolder)
        println "copy project theme ${projectTheme.canonicalPath}"
        copy {
            from(projectTheme) {}
            into("${targetDir}/microsite/tmp/site")
        }
    }

}

def convertAdditionalFormats = {
    if (config.microsite.additionalConverters) {
        File sourceFolder = new File(targetDir, '/microsite/tmp/site/doc')
        sourceFolder.traverse(type: FILES) { file -&gt;
            def extension = '.' + file.name.split("[.]")[-1]
            if (config.microsite.additionalConverters[extension]) {
                def command = config.microsite.additionalConverters[extension].command
                def type = config.microsite.additionalConverters[extension].type
                def binding = new Binding([
                    file  : file,
                    config: config
                ])
                def shell = new GroovyShell(getClass().getClassLoader(), binding)
                switch (type) {
                    case 'groovy':
                        shell.evaluate(command)
                        break
                    case 'groovyFile':
                        shell.evaluate(new File(docDir, command).text)
                        break
                    case 'bash':
                        if (command=='dtcw:rstToHtml.py') {
                            // this is an internal script
                            command = projectDir.canonicalPath+'/scripts/rstToHtml.py'
                        }
                        command = ['bash', '-c', command + ' "' + file + '"']
                        def process = command.execute([], new File(docDir))
                        process.waitFor()
                        if (process.exitValue()) {
                            def error = process.err.text
                            println """
can't convert '${file.canonicalPath-docDir-'/build/microsite/tmp/site/doc'}':
${error}
"""
                            throw new Exception("""
can't convert '${file.canonicalPath-docDir-'/build/microsite/tmp/site/doc'}':
${error}
""")
                        }
                }
            }
        }
    }

}

def parseAsciiDocAttribs = { origText, jbake -&gt;
    def parseAttribs = true
    def text = ""
    def beforeToc = ""
    origText.eachLine { line -&gt;
        if (parseAttribs &amp;&amp; line.startsWith(":jbake")) {
            def parsedJbakeAttribute = (line - ":jbake-").split(": +", 2)
            if(parsedJbakeAttribute.length != 2) {
                logger.warn("jbake-attribute is not valid or Asciidoc conform: $line")
                logger.warn("jbake-attribute $line will be ignored, trying to continue...")
            } else {
                jbake[parsedJbakeAttribute[0]] = parsedJbakeAttribute[1]
            }
        } else {
            if (line.startsWith("[")) {
                // stop parsing jBake-attribs when a [source] - block starts which might contain those attribs as example
                parseAttribs = false
            }
            text += line+"\n"
            //there are some attributes which have to be set before the toc
            if (line.startsWith(":toc") ) {
                beforeToc += line+"\n"
            }
        }
    }
    return [text, beforeToc]
}

def parseOtherAttribs = { origText, jbake -&gt;
    if (origText.contains('~~~~~~')) {
        def parseAttribs = true
        def text = ""
        origText.eachLine { line -&gt;
            if (parseAttribs &amp;&amp; line.contains("=")) {
                line = (line - "jbake-").split("=", 2)
                jbake[line[0]] = line[1]
            } else {
                if (line.startsWith("~~~~~~")) {
                    // stop parsing jBake-attribs when delimiter shows up
                    parseAttribs = false
                } else {
                    text += line + "\n"
                }
            }
        }
        return text
    } else {
        return origText
    }
}

def renderHeader = { fileName, jbake -&gt;
    def header = ''
    if (fileName.toLowerCase() ==~ '^.*(html|md)$') {
        jbake.each { key, value -&gt;
            if (key == 'order') {
                header += "jbake-${key}=${(value ?: '1') as Integer}\n"
            } else {
                if (key in ['type', 'status']) {
                    header += "${key}=${value}\n"
                } else {
                    header += "jbake-${key}=${value}\n"
                }
            }
        }
        header += "~~~~~~\n\n"

    } else {
        jbake.each { key, value -&gt;
            if (key == 'order') {
                header += ":jbake-${key}: ${(value ?: '1') as Integer}\n"
            } else {
                header += ":jbake-${key}: ${value}\n"
            }
        }
    }
    return header
}
def fixMetaDataHeader = {
    //fix MetaData-Header
    File sourceFolder = new File(targetDir, '/microsite/tmp/site/doc')
    logger.info("sourceFolder: " + sourceFolder.canonicalPath)
    sourceFolder.traverse(type: FILES) { file -&gt;
        if (file.name.toLowerCase() ==~ '^.*(ad|adoc|asciidoc|html|md)$') {
            if (file.name.startsWith("_") || file.name.startsWith(".")) {
                //ignore
            } else {
                def origText = file.text
                //parse jbake attributes
                def text = ""
                def jbake = [
                    status: "published",
                    order: -1,
                    type: 'page_toc'
                ]
                if (file.name.toLowerCase() ==~ '^.*(md|html)$') {
                    // we don't have a toc for md or html
                    jbake.type = 'page'
                }
                def beforeToc = ""
                if (file.name.toLowerCase() ==~ '^.*(ad|adoc|asciidoc)$') {
                    (text, beforeToc) = parseAsciiDocAttribs(origText, jbake)
                } else {
                    text = parseOtherAttribs(origText, jbake)
                }
                def name = file.canonicalPath - (sourceFolder.canonicalPath+File.separator)
                if (File.separator=='\\') {
                    name = name.split("\\\\")
                } else {
                    name = name.split("/")
                }
                if (name.size()&gt;1) {
                    if (!jbake.menu) {
                        jbake.menu = name[0]
                        if (jbake.menu ==~ /[0-9]+[-_].*/) {
                            jbake.menu = jbake.menu.split("[-_]", 2)[1]
                        }
                    }
                    def docname = name[-1]
                    if (docname ==~ /[0-9]+[-_].*/) {
                        jbake.order = docname.split("[-_]",2)[0]
                        docname     = docname.split("[-_]",2)[1]
                    }
                    if (name.size() &gt; 2) {
                        if ((jbake.order as Integer)==0) {
                            // let's take the order from the second level dir or file and not the file
                            def secondLevel = name[1]
                            if (secondLevel ==~ /[0-9]+[-_].*/) {
                                jbake.order = secondLevel.split("[-_]",2)[0]
                            }
                        } else {
                            if (((jbake.order?:'1') as Integer) &gt; 0) {
                                //
                            } else {
                                jbake.status = "draft"
                            }
                        }
                    }
                    if (jbake.order==-1 &amp;&amp; docname.startsWith('index')) {
                        jbake.order = -987654321 // special 'magic value' given to index pages.
                        jbake.status = "published"
                    }
                    // news blog
                    if (jbake.order==-1 &amp;&amp; jbake.type=='post') {
                        jbake.order = 0
                        try {
                            jbake.order = Date.parse("yyyy-MM-dd", jbake.date).time / 100000
                        } catch ( Exception e) {
                            System.out.println "unparsable date ${jbake.date} in $name"
                        }
                        jbake.status = "published"
                    }
                    def leveloffset = 0
                    if (file.name.toLowerCase() ==~ '^.*(ad|adoc|asciidoc)$') {
                        text.eachLine { line -&gt;
                            if (!jbake.title &amp;&amp; line ==~ "^=+ .*") {
                                jbake.title = (line =~ "^=+ (.*)")[0][1]
                                def level = (line =~ "^(=+) .*")[0][1]
                                if (level == "=") {
                                    leveloffset = 1
                                }
                            }
                        }
                    } else {
                        if (file.name.toLowerCase() ==~ '^.*(html)$') {
                            if (!jbake.title) {
                                text.eachLine { line -&gt;
                                    if (!jbake.title &amp;&amp; line ==~ "^&lt;h[1-9]&gt;.*&lt;/h.*") {
                                        jbake.title = (line =~ "^&lt;h[1-9]&gt;(.*)&lt;/h.*")[0][1]
                                    }
                                }
                            }
                        } else {
                            // md
                            if (!jbake.title) {
                                text.eachLine { line -&gt;
                                    if (!jbake.title &amp;&amp; line ==~ "^#+ .*") {
                                        jbake.title = (line =~ "^#+ (.*)")[0][1]
                                    }
                                }
                            }
                        }
                    }
                    if (!jbake.title) {
                        jbake.title = docname
                    }
                    if (leveloffset==1) {
                        //leveloffset needed
                        // we always start with "==" not with "="
                        // only used for adoc
                        text = text.replaceAll("(?ms)^(=+) ", '$1= ')
                    }
                    if (config.microsite.customConvention) {
                        def binding = new Binding([
                            file  : file,
                            sourceFolder : sourceFolder,
                            config: config,
                            headers : jbake
                        ])
                        def shell = new GroovyShell(getClass().getClassLoader(), binding)
                        shell.evaluate(config.microsite.customConvention)
                        System.out.println jbake

                    }
                    def header = renderHeader(file.name, jbake)
                    if (file.name.toLowerCase() ==~ '^.*(ad|adoc|asciidoc)$') {
                        file.write(header + "\nifndef::dtc-magic-toc[]\n:dtc-magic-toc:\n$beforeToc\n\n:toc: left\n\n++++\n&lt;!-- endtoc --&gt;\n++++\nendif::[]\n" + text, "utf-8")
                    } else {
                        file.write(header + "\n" + text, "utf-8")
                    }
                }
            }
        }
    }

}

task generateSite(
    group: 'docToolchain',
    description: 'generate a microsite using jBake.') {
    doLast {
        new File("${targetDir}/microsite/tmp").mkdirs()
        println new File("${targetDir}/microsite/tmp/").canonicalPath

        prepareAndCopyTheme()

        //copy docs
        copy {
            from(new File(docDir, inputPath)) {}
            into("${targetDir}/microsite/tmp/site/doc")
        }

        // if configured, convert restructuredText or anything else
        convertAdditionalFormats()

        // convention over configuration
        fixMetaDataHeader()

    }
}

task previewSite(
    group: 'docToolchain',
    dependsOn: [],
    description: 'preview your Microsite',
) {
    doLast {
        println("previewSite command has been deprecated.")
        println("To preview your site, open ${targetDir}/microsite/output/index.html in your browser.")
        println("To read alternative ways to preview your site, please consult the documentation.")
    }
}
previewSite.dependsOn(generateSite)
previewSite.mustRunAfter(bake)

task copyImages(type: Copy) {
    config.imageDirs.each { imageDir -&gt;
        from(new File (new File(docDir, inputPath),imageDir)) {}
        logger.info ('imageDir: '+imageDir)
        into("${targetDir}/microsite/output/images")
    }
    config.resourceDirs.each { resource -&gt;
        from(new File(file(srcDir),resource.source))
        logger.info ('resource: '+resource.source)
        into("${targetDir}/microsite/output/" + resource.target)
    }
}

bake.dependsOn copyImages
generateSite.finalizedBy bake</code></pre>
</div>
</div>
</div>
</details>
</div>
</div>
</div>
        </p>

        <style>
.feedback--answer {
    display: inline-block;
}

.feedback--answer-no {
    margin-left: 1em;
}

.feedback--response {
    display: none;
    margin-top: 1em;
}

.feedback--response__visible {
    display: block;
}
</style>

<div class="d-print-none">
    <h2 class="feedback--title">Feedback</h2>
    <p class="feedback--question">Was this page helpful?</p>
    <button class="feedback--answer feedback--answer-yes">Yes</button>
    <button class="feedback--answer feedback--answer-no">No</button>
    <p class="feedback--response feedback--response-yes">
        Glad to hear it! Please <a href="https://github.com/docToolchain/docToolchain/issues/new?title=Docs%3A+Feedback+for+%27generateSite%27%20%F0%9F%91%8D&body=%0A%0A%5BEnter%20feedback%20here%5D%0A%0A%0A---%0A%23page:015_tasks/03_task_generateSite.adoc">tell us
    how we can improve</a>.
    </p>
    <p class="feedback--response feedback--response-no">
        Sorry to hear that. Please <a href="https://github.com/docToolchain/docToolchain/issues/new?title=Docs%3A+Feedback+for+%27generateSite%27%20%F0%9F%91%8E&body=%0A%0A%5BEnter%20feedback%20here%5D%0A%0A%0A---%0A%23page:015_tasks/03_task_generateSite.adoc">tell
    us how we can improve</a>.
    </p>
</div>
<script>
    const yesButton = document.querySelector('.feedback--answer-yes');
    const noButton = document.querySelector('.feedback--answer-no');
    const yesResponse = document.querySelector('.feedback--response-yes');
    const noResponse = document.querySelector('.feedback--response-no');
    const disableButtons = () => {
        yesButton.disabled = true;
        noButton.disabled = true;
    };
    const sendFeedback = (value) => {
        if (typeof ga !== 'function') return;
        const args = {
            command: 'send',
            hitType: 'event',
            category: 'Helpful',
            action: 'click',
            label: window.location.pathname,
            value: value
        };
        ga(args.command, args.hitType, args.category, args.action, args.label, args.value);
    };
    yesButton.addEventListener('click', () => {
        yesResponse.classList.add('feedback--response__visible');
        disableButtons();
        sendFeedback(1);
    });
    noButton.addEventListener('click', () => {
        noResponse.classList.add('feedback--response__visible');
        disableButtons();
        sendFeedback(0);
    });
</script>


        <br>

        <!--div class="text-muted mt-5 pt-3 border-top">Last modified July 3, 2019: <a
                href="https://github.com/google/docsy-example/commit/d6aa89c8b24089d7e6741030864eff209465e896">Added
            links to user guide repo (d6aa89c)</a>
        </div-->
    </div>


			</main>

		</div>
	</div>


	
    <!--footer class="footer mt-auto py-3 bg-light">
        <div class="container">
            <span class="text-muted">&copy; 2020 | based on <a href="https://arc42.org">arc42 7.0</a> | mixed with <a href="http://getbootstrap.com/">Bootstrap v5.0.0-beta</a> | Baked with <a href="http://jbake.org">JBake v2.6.7</a></span>
        </div>
    </footer-->

    <footer class="bg-dark py-5 row d-print-none">
        <div class="container-fluid mx-sm-5">
            <div class="row">
                <div class="col-6 col-sm-4 text-xs-center order-sm-2">


                    <ul class="list-inline mb-0">
                        
                        <li aria-label="User mailing list" class="list-inline-item mx-2 h3" data-original-title="User mailing list" data-placement="top"
                            data-toggle="tooltip" title="">
                            <a class="text-white" href="mailto:info@docs-as-co.de" rel="noopener noreferrer"
                               target="_blank">
                                <i class="fa fa-envelope"></i>
                            </a>
                        </li>
                        
                        
                        <li aria-label="Twitter" class="list-inline-item mx-2 h3" data-original-title="Twitter" data-placement="top"
                            data-toggle="tooltip" title="">
                            <a class="text-white" href="https://twitter.com/doctoolchain" rel="noopener noreferrer"
                               target="_blank">
                                <i class="fab fa-twitter"></i>
                            </a>
                        </li>
                        
                        
                        <li aria-label="Stack Overflow" class="list-inline-item mx-2 h3" data-original-title="Stack Overflow" data-placement="top"
                            data-toggle="tooltip" title="">
                            <a class="text-white" href="https://stackoverflow.com/questions/tagged/doctoolchain" rel="noopener noreferrer"
                               target="_blank">
                                <i class="fab fa-stack-overflow"></i>
                            </a>
                        </li>
                        
                    </ul>


                </div>
                <div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">


                    <ul class="list-inline mb-0">

                        
                        <li aria-label="GitHub" class="list-inline-item mx-2 h3" data-original-title="GitHub" data-placement="top"
                            data-toggle="tooltip" title="">
                            <a class="text-white" href="https://github.com/doctoolchain/doctoolchain" rel="noopener noreferrer"
                               target="_blank">
                                <i class="fab fa-github"></i>
                            </a>
                        </li>
                        

                        


                    </ul>


                </div>
                <div class="col-12 col-sm-4 text-center py-2 order-sm-2">

                        <small class="text-white">built with <a href="https://doctoolchain.org">docToolchain</a> and <a href="https://jbake.org">jBake</a> <br /> theme: <a href="https://www.docsy.dev/">docsy</a></small>

                </div>
            </div>
        </div>
    </footer>

    <script src="../js/popper.min.js"></script>
    <script src="../js/bootstrap.min.js"></script>


    <script src="../js/main.min.b5fc1b29d2465835844254bd4d804738eaf24c0cec53009b4c6899989be55a47.js"></script>
    <script src="../js/blocks.js" ></script>
    <script src="../js/prettify.js"></script>
    <script src="../js/copy-n-paste.js"></script>
    <script src="../js/submenucollapse.js"></script>


</body>
</html>
