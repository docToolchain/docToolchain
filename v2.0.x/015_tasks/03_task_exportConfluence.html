<!doctype html>
<html lang="de">
<head>
    
    <!-- sourceuri: 015_tasks/03_task_exportConfluence.html -->
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">

    <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
    <meta content="jbake" name="generator">
    <meta content="INDEX, FOLLOW" name="ROBOTS">

    <title>exportConfluence</title>
    <meta content="docToolchain" property="og:title">
    <meta content="build your dev docs the easy way..." property="og:description">
    <meta content="website" property="og:type">
    <meta content="docToolchain" property="og:site_name">
    <meta content="docToolchain" itemprop="name">
    <meta content="build your dev docs the easy way..." itemprop="description">
    <meta content="summary" name="twitter:card">
    <meta content="docToolchain" name="twitter:title">
    <meta content="build your dev docs the easy way..." name="twitter:description">

    <link as="style"
        href="../css/main.min.881fe5f7b53609f55ebfb496c7097c3b30b2e8ceb20a54bc6a48350ded67224f.css"
        rel="preload">
    <link href="../css/main.min.881fe5f7b53609f55ebfb496c7097c3b30b2e8ceb20a54bc6a48350ded67224f.css"
        integrity=""
        rel="stylesheet">
    <link href="../css/asciidoctor.css" rel="stylesheet">
    <link href="../css/prettify.css" rel="stylesheet">

    <!-- favicon generated with https://www.favicon-generator.org/ -->
    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="apple-touch-icon" sizes="57x57" href="../apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="../apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="../apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="../apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="../apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="../apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="../apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="../apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="../apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192" href="../android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
    <link rel="manifest" href="../manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="../ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">

    <script src="../js/jquery-3.5.1.min.js"></script>
    <style>
    div.bg-light {
        background-color: rgba(127, 180, 224, 0.3) !important;
    }

    /* for blog posts */
    span.blogtag {
        border-radius: 10px;
        background-color: #30638E;
        color: white;
        padding: 5px 10px;
    }

    span.blogblogtag a {
        color: white;
        padding: 0
    }

    span.blogtag span {
        margin-left: 10px;
        border-radius: 10px;
        background-color: white;
        color: #30638E;
    }

    div.td-toc {
        height: calc(100vh - 5rem) !important;
    }

    div#toctitle {
        display: none
    }

    #td-section-nav {
        max-height: calc(100vh - 4rem);
        font-size: smaller;
        line-height: 1.1;
    }

    .td-page-meta {
        font-size: smaller;
        line-height: 1.1;
    }

    #td-section-nav ul.td-sidebar-nav__section {
        padding-left: 0;
    }

    span.navbar-logo {
        padding-right: 1.5em;
    }

    .match {
        font-size: smaller;
    }

    .admonitionblock td.icon .fa:before {
        font-size: xxx-large;
    }
    </style>

    <style>
    div.openblock.primary div.content, div.openblock.secondary div.content {
        border: 1px solid #7a2518;
        padding: 5px;
    }

    div.openblock.primary div.content div.content, div.openblock.secondary div.content div.content {
        border: 0 solid #7a2518;
        padding: 0;
    }

    .hidden {
        display: none;
    }

    .switch {
        border-width: 1px 1px 0 1px;
        border-style: solid;
        border-color: #7a2518;
        display: inline-block;
    }

    .switch--item {
        padding: 2px 10px;
        background-color: #ffffff;
        color: #7a2518;
        display: inline-block;
        cursor: pointer;
    }

    .switch--item:not(:first-child) {
        border-width: 0 0 0 1px;
        border-style: solid;
        border-color: #7a2518;
    }

    .switch--item.selected {
        background-color: #7a2519;
        color: #ffffff;
    }
    </style>

    <!-- copy-n-paste.js -->
    <style>
        div.listingblock {
            position: relative;
        }
        div.listingblock > span.icon {
            position: absolute;
            top: 2px;
            right: 6px;
            visibility: hidden;
            z-index: 2;
            cursor: pointer;
        }
        div.listingblock:hover > span.icon {
            visibility: visible;
        }
        div.listingblock div.content pre {
            margin: 0;
        }
    </style>
    <style>
        .td-sidebar-nav__section {
            padding-left: 9px;
        }
        details {
            margin-left: 10px;
        }
        summary {
            cursor: pointer;
            padding-left: 10px; /* Erhöhter linker Padding für den Pfeil */
            list-style: none;
            position: relative; /* Für absolute Positionierung des Pfeils */
        }
        summary::before {
            content: '>';
            position: absolute;
            left: 10px; /* Position des Pfeils */
            top: 50%;
            transform: translateY(-50%) translateX(-120%);
            transition: transform 0.3s;
        }
        details[open] > summary::before {
            transform: translateY(-50%) translateX(-120%) rotate(90deg);
        }
    </style>
</head>

<body onload="prettyPrint()" class="td-section">
<header>
	
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
    <a class="navbar-brand" href="../index.html">
        <span class="navbar-logo"><img src="../images/doctoolchain-logo-blue.png" alt="docToolchain" width="32px" /></span><span
            class="font-weight-bold">docToolchain</span>
    </a>
    <div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
        <ul class="navbar-nav mt-2 mt-lg-0">
    <li class="nav-item mr-4 mb-2 mb-lg-0"><!--img src="../images/status.png" alt="status" width="16" height="16" onerror="this.style.display='none'"--></li>

            <li class="nav-item mr-4 mb-2 mb-lg-0">
                <a class="nav-link " href="../10_about/10_about-the-project.html"><span>About</span></a>
            </li>

            <li class="nav-item mr-4 mb-2 mb-lg-0">
                <a class="nav-link " href="../010_manual/20_install.html"><span>User Docs</span></a>
            </li>

            <li class="nav-item mr-4 mb-2 mb-lg-0">
                <a class="nav-link active" href="../015_tasks/03_tasks.html"><span>Tasks</span></a>
            </li>

            <li class="nav-item mr-4 mb-2 mb-lg-0">
                <a class="nav-link " href="../020_tutorial/010_Install.html"><span>Tutorial</span></a>
            </li>

            <li class="nav-item mr-4 mb-2 mb-lg-0">
                <a class="nav-link " href="../025_development/005_contributing_to_docs.html"><span>For Devs</span></a>
            </li>

            <li class="nav-item mr-4 mb-2 mb-lg-0">
                <a class="nav-link " href="../030_news/index.html"><span>News</span></a>
            </li>

        </ul>
    </div>
    <div class="navbar-nav d-none d-lg-block" >
        <form action="../search.html">
        <input aria-label="Search this site…" autocomplete="off" class="form-control td-search-input"
               placeholder=" Search this site…" type="search" name="q">
        </form>
    </div>
</nav>

</header>
<div class="container-fluid td-outer">
	<div class="td-main">
		<div class="row flex-xl-nowrap">
			<div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
				<div class="td-sidebar__inner" id="td-sidebar-menu" >
					

        <form class="td-sidebar__search d-flex align-items-center d-lg-none" action="../search.html">

            <input aria-label="Search this site…" name="q" autocomplete="off" class="form-control td-search-input"
                   placeholder=" Search this site…" type="search">


            <button aria-controls="td-docs-nav" aria-expanded="false"
                    aria-label="Toggle section navigation" class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" data-target="#td-section-nav"
                    data-toggle="collapse" type="button">
            </button>
        </form>

        <nav aria-label="Submenu" class="collapse td-sidebar-nav" id="td-section-nav" >

            <ul class="td-sidebar-nav__section">
                <li class="td-sidebar-nav__section-title">
                    <span class="align-left pl-0 pr-2 pt-2 active td-sidebar-link td-sidebar-link__section">Tasks</span>
                </li>
                <li>
                  <ul>
                      <li class="collapse show" id="docs">
                          
                        <ul class="td-sidebar-nav__section ul-0">
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../015_tasks/03_tasks.html" title="What Is a Task?">What Is a Task?</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../015_tasks/03_task_autobuildSite.html" title="autobuildSite">autobuildSite</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../015_tasks/03_task_collectIncludes.html" title="collectIncludes">collectIncludes</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../015_tasks/03_task_convertToDocx.html" title="convertToDocx">convertToDocx</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../015_tasks/03_task_convertToEpub.html" title="convertToEpub">convertToEpub</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../015_tasks/03_task_copy_themes.html" title="copyThemes">copyThemes</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../015_tasks/03_task_createReferenceDoc.html" title="createReferenceDoc">createReferenceDoc</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../015_tasks/03_task_dependencyUpdates.html" title="dependencyUpdates">dependencyUpdates</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../015_tasks/03_task_downloadTemplate.html" title="downloadTemplate">downloadTemplate</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../015_tasks/03_task_exportChangeLog.html" title="exportChangeLog">exportChangeLog</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section active"
                                   href="../015_tasks/03_task_exportConfluence.html" title="exportConfluence">exportConfluence</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../015_tasks/03_task_exportContributors.html" title="exportContributors">exportContributors</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../015_tasks/03_task_exportDrawIo.html" title="exportDrawIo">exportDrawIo</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../015_tasks/03_task_exportEA.html" title="exportEA">exportEA</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../015_tasks/03_task_exportExcel.html" title="exportExcel">exportExcel</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../015_tasks/03_task_exportJiraIssues.html" title="exportJiraIssues">exportJiraIssues</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../015_tasks/03_task_exportJiraSprintChangelog.html" title="exportJiraSprintChangelogIssues">exportJiraSprintChangelogIssues</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../015_tasks/03_task_exportMarkdown.html" title="exportMarkdown">exportMarkdown</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../015_tasks/03_task_exportMetrics.html" title="exportMetrics">exportMetrics</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../015_tasks/03_task_exportOpenApi.html" title="exportOpenAPI">exportOpenAPI</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../015_tasks/03_task_exportPPT.html" title="exportPPT">exportPPT</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../015_tasks/03_task_exportStructurizr.html" title="exportStructurizr">exportStructurizr</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../015_tasks/03_task_exportVisio.html" title="exportVisio">exportVisio</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../015_tasks/03_task_fixencoding.html" title="fixEncoding">fixEncoding</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../015_tasks/03_task_generateContent.html" title="generateContent">generateContent</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../015_tasks/03_task_generateDeck.html" title="generateDeck">generateDeck</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../015_tasks/03_task_generateDocBook.html" title="generateDocbook">generateDocbook</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../015_tasks/03_task_generateHTML.html" title="generateHTML">generateHTML</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../015_tasks/03_task_generatePDF.html" title="generatePDF">generatePDF</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../015_tasks/03_task_generateSite.html" title="generateSite">generateSite</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../015_tasks/03_task_htmlSanityCheck.html" title="htmlSanityCheck">htmlSanityCheck</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../015_tasks/03_task_prependFilename.html" title="prependFilename">prependFilename</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../015_tasks/03_task_previewSite.html" title="previewSite">previewSite</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../015_tasks/03_task_publishToConfluence.html" title="publishToConfluence">publishToConfluence</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../015_tasks/03_task_wipeConfluenceSpace.html" title="wipeConfluenceSpace">wipeConfluenceSpace</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../015_tasks/150_task_createTask.html" title="createTask">createTask</a>
                                
                            </li>
                        </ul>
                      </li>
                  </ul>
                <li>
        </nav>

				</div>
			</div>
			<div class="d-none d-xl-block col-xl-2 td-toc d-print-none">
				<div class="td-page-meta ml-2 pb-1 pt-2 mb-0">
					

        <a href="https://github.com/doctoolchain/doctoolchain/edit/ng/src/docs/015_tasks/03_task_exportConfluence.adoc"
           target="_blank"><i class="fa fa-edit fa-fw"></i> Improve this doc</a>


        <a href="https://github.com/docToolchain/docToolchain/issues/new?title=Docs%3A+Feedback+for+%27exportConfluence%27&body=%0A%0A%5BEnter%20feedback%20here%5D%0A%0A%0A---%0A%23page:%20https://github.com/doctoolchain/doctoolchain/edit/ng/src/docs/015_tasks/03_task_exportConfluence.adoc%0A%23branch:%20ng" target="_blank"><i
                class="fab fa-github fa-fw"></i> Create an issue</a>

        
        
        <hr />
<script>
const issuesBaseUrl = "https://api.github.com/repos/doctoolchain/doctoolchain/issues";
const searchTerm = "015_tasks/03_task_exportConfluence.adoc";
</script>

<script src="../js/issues.js"></script>

<style>
        #issues-container {
            background-color: white;
            padding: 0px;
            margin: 0;
        }
        .issue {
            display: flex;
            align-items: flex-start;
            margin-bottom: 5px;
            padding-bottom: 5px;
            border-bottom: 1px solid #eee;
        }
        .issue:last-child {
            border-bottom: none;
        }
        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin-right: -10px;
        }
        .issue-content {
            flex-grow: 1;
            background-color: rgba(255,255,255,0.6);
        }
        .issue-title {
            font-weight: bold;
            color: #0366d6;
        }
        .issue-date {
            font-size: 0.9em;
            color: #586069;
        }

</style>

<div id="issues-container">
searching issues...
</div>

        <hr />

        <div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_exportconfluence">exportConfluence</a>
<ul class="sectlevel2">
<li><a href="#_about_this_task">About This Task</a></li>
<li><a href="#_source">Source</a></li>
</ul>
</li>
</ul>
</div>




				</div>
			</div>
			<main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
				    <nav aria-label="breadcrumb" class="d-none d-md-block d-print-none">
        <ol class="breadcrumb spb-1">
            <!--li aria-current="page" class="breadcrumb-item active">
                <a href="https://example.docsy.dev/docs/">Documentation</a>
            </li-->

        </ol>
    </nav>


    <div class="td-content">
        <p>
            
<style>
.gravatar img {
    margin-left: 3px;
    border-radius: 4px;
}
</style>
<div class="sect1">
<h2 id="_exportconfluence">exportConfluence</h2>
<div class="sectionbody">
<div class="paragraph">
<p><span class="image gravatar"><img src="https://www.gravatar.com/avatar/a1a5917e47cadf234366c3e3beef39b6?d=identicon" alt="Johannes Thorn" width="32" height="32" title="Johannes Thorn"></span> <span class="image gravatar"><img src="https://www.gravatar.com/avatar/cc5f3bf8b3cb91c985ed4fd046aa451d?d=identicon" alt="Ralf D. Müller" width="32" height="32" title="Ralf D. Müller"></span></p>
</div>
<div class="literalblock">
<div class="content">
<pre>3 minutes to read</pre>
</div>
</div>
<div class="sect2">
<h3 id="_about_this_task">About This Task</h3>
<div class="paragraph">
<p>For a long time, docToolchain supports the conversion of AsciiDoc files to confluence spaces.
This task now allows you to convert you confluence spaces back to AsciiDoc.</p>
</div>
<div class="paragraph">
<p>A confluence space will be converted to a "ready to use" set of AsciiDoc files together with a navigation menu.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
the results of the conversion are quite good. However, don&#8217;t expect the two tasks <code>publishToConfluence</code> and <code>exportConfluence</code> to be able to give you a full round-trip without losing some information about the format of your texts.
As an example, numbered headlines will not be automatically converted between both systems.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The task <code>exportConfluence</code> parses the entities.xml file of a confluence-space export and creates a hierarchical html export.
It then uses pandoc to convert the HTML files to AsciiDoc.
Since this conversion isn&#8217;t perfect and pandoc doesn&#8217;t even know about confluence macros, the script also does some pre- and post-processing.</p>
</div>
<div class="sect3">
<h4 id="_prerequisites">prerequisites</h4>
<div class="ulist">
<ul>
<li>
<p>docToolchain &gt;= v2.2</p>
</li>
<li>
<p>you need to have <a href="https://pandoc.com">pandoc</a> installed.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_usage">usage</h4>
<div class="paragraph">
<p>Export the confluence space as XML and unzip it in a distinct <code>sample_data</code> folder.</p>
</div>
<div class="paragraph">
<p>To export the confluence space, navigate to the space and then click</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Space Settings</code></p>
</li>
<li>
<p><code>Manage Space &gt; Export Space</code></p>
</li>
<li>
<p><code>[x] Export Formats: XLM</code> &#8658; <code>Next</code></p>
</li>
<li>
<p><code>[x] Full Export</code> &#8658; <code>Export</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Configure the right paths in your <code>docToolchainConfig.groovy</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="groovy">    export = [
            srcDir: 'sample_data',
            destDir: 'src/docs'
    ]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then use the following steps to run the script and render the results as a microsite:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="bash">./dtcw exportConfluence
./dtcw generateSite</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also specify the needed parameters through the command line:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>./dtcw exportConfluence -Pconfluence.export.srcDir=sample_data -Pconfluence.export.destDir=src/docs</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_supported_features">Supported Features</h4>
<div class="ulist">
<ul>
<li>
<p>all kinds of text formatting</p>
</li>
<li>
<p>line breaks</p>
</li>
<li>
<p>paragraphs</p>
</li>
<li>
<p>explizit, external links</p>
</li>
<li>
<p>image attachments</p>
</li>
<li>
<p>admonitions</p>
</li>
<li>
<p>.-Titles</p>
</li>
<li>
<p>Anchors</p>
</li>
<li>
<p>numbered Lists</p>
</li>
<li>
<p>bulleted Lists</p>
</li>
<li>
<p>literal blocks</p>
</li>
<li>
<p>code blocks</p>
</li>
<li>
<p>horizontal rules</p>
</li>
<li>
<p>Quotes look good</p>
</li>
<li>
<p>standard tables</p>
</li>
<li>
<p>lucidchart diagrams</p>
</li>
<li>
<p>anchors</p>
</li>
<li>
<p>link-macro</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_unsupported_features">unsupported features</h4>
<div class="ulist">
<ul>
<li>
<p>tables with colspans or rowspans</p>
</li>
<li>
<p>layout-sections</p>
</li>
<li>
<p>inline comments</p>
</li>
<li>
<p>comments</p>
</li>
<li>
<p>expand blocks</p>
</li>
<li>
<p>user-profile macro has only rudimentary support</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_known_issues">known issues</h4>
<div class="ulist">
<ul>
<li>
<p>Definitions lists are transformed to tables</p>
</li>
<li>
<p>Quotes are not exactly as expected but look good</p>
</li>
<li>
<p>tables with colspan will have colspan removed</p>
</li>
<li>
<p>include sections are in give sort order</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_source">Source</h3>
<details>
<summary class="title">Show source code of <code>scripts/confluenceToAsciiDoc.groovy</code> or go directly to <a href="https://github.com/docToolchain/docToolchain/blob/ng/scripts/confluenceToAsciiDoc.groovy" target="_blank" rel="noopener">GitHub · docToolchain/scripts/confluenceToAsciiDoc.groovy</a>.</summary>
<div class="content">
<div class="listingblock">
<div class="title">scripts/confluenceToAsciiDoc.groovy</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="groovy">import org.jsoup.Jsoup
import org.jsoup.parser.Parser
import org.jsoup.nodes.Document
import groovy.xml.XmlSlurper
import groovy.xml.slurpersupport.GPathResult

import java.nio.file.Files
import java.nio.file.StandardCopyOption

// parse command line arguments and display usage info
List parseCliArgs(String[] args) {
    // parse the exportet confluence entities from xml file
    if (args.size() &lt; 2) {
        println """
Usage:
  groovy exportConfluence.groovy srcDir=[name of source dir] destDir=[name of destination dir]
  both dirs can be specified as relative path.
  the script expects the srcDir to contain the unzipped data from a confluence space XML export
  """
        System.exit(1)
    }
    parsedArgs = args.collectEntries { it.split("=").each { it.trim() } }
    def srcDir = new File(parsedArgs.srcDir)
    def destDir = new File(parsedArgs.destDir)
    destDir.mkdirs()
    return [srcDir, destDir]
}
lucidChartsIframe = false
unknownTagsStats = [:]
//takes confluence xHTML storage format and fixes some issues to be better converted by pandoc
def fixBody(pageId, String body, users, pages, space) {
    body = body
    // it seems to be a bug how CDATA sections are closed in the xHTML
            .replaceAll("]] &gt;&lt;", "]]&gt;&lt;")
    // remove empty headings
            .replaceAll("&lt;h[1-9]&gt; &lt;/h[1-9]&gt;","")
    // remove unecessary colspan attrib
            .replaceAll('colspan="1"',"")
    // fix colspan=2 for pandoc
            .replaceAll('colspan="2"(.*?)&lt;/(t[dh])&gt;','$1&lt;/$2&gt;&lt;$2&gt;&lt;/$2&gt;')

    Document dom = Jsoup.parse(body, 'utf-8', Parser.xmlParser())
    dom.outputSettings().prettyPrint(false);//makes html() preserve linebreaks and spacing
    dom.outputSettings().escapeMode(org.jsoup.nodes.Entities.EscapeMode.xhtml); //This will ensure xhtml validity regarding entities
    dom.outputSettings().charset("UTF-8"); //does no harm :-)
    // search for image tags and convert them to HTML
    // get all ac: tags
    def acTags = []
    dom.select("*").each { element -&gt;
        if (element.tagName().startsWith("ac:")) {
            acTags &lt;&lt; element.tagName().replace(":", "|")
        }
    }
    //fix links which still point to confluence
    dom.select("a").each { element -&gt;
        def href = element.attr('href')
        def regexp = href =~ '/spaces/([^/]+)/pages/([0-9]+)/'
        if (regexp.size()==1) {
            // we have a link to confluence.
            // let's try to redirect it to out static page
            def targetSpace = regexp[0][1]
            if (space.key!=targetSpace) {
                println "WARNING: can't rewrite links between different spaces (source: $space.key, target: $targetSpace)"
            } else {
                def targetPage = regexp[0][2]
                def targetFilename = (pages[targetPage]?.filename) ?: ''
                def folderStructureTarget = getFolderStructure(pages, targetPage).join("/")
                def folderStructureSource = getFolderStructure(pages, pageId)
                def targetLink = "../" * folderStructureSource.size() + folderStructureTarget + "/" + targetFilename + ".html"
                element.attr('href', targetLink)
            }
        }
    }
    dom.select("span").each { element -&gt;
        if (element.attr("class").startsWith("css-")) {
            element.unwrap()
        }
        if (element.attr("class").startsWith("loader-wrapper")) {
            element.unwrap()
        }
        if (element.attr("class").contains("smart-link-title-wrapper")) {
            element.unwrap()
        }
    }
    acTags = acTags.unique()
    def unknownTags = []
    if (acTags.size() &gt; 0) {
        dom.select(acTags.join(", ")).each { element -&gt;
            def name = element.tagName()
            switch (name) {
                case "ac:image":
                    def alignment = element.attr("ac:align")
                    def width = element.attr("ac:width")
                    def filename = element.select(["ri|attachment"]).attr("ri:filename")
                    def version = element.select(["ri|attachment"]).attr("ri:version-at-save")
                    element.before("&lt;img src='{filepath}/${(version?version+"_":"1_")+(filename.replaceAll(":","_"))}' align='${alignment?:''}' width='${width?:''}' /&gt;")
                    element.remove()
                    break
                case "ac:link":
                    if (element.children().size()&gt;0) {
                        def anchor = element.attr("ac:anchor")
                        def targetPage = element.select("ri|page").attr("ri:content-title")
                        def linkText = element.select("ac|plain-text-link-body").text()
                        if (linkText.trim()=="") {
                            linkText = element.select("ac|link-body").text()
                        }
                        targetPage = pages.find { _pageId, pageInfo -&gt; pageInfo.title == targetPage}
                        if (targetPage) {
                            def folderStructureTarget = getFolderStructure(pages, targetPage.key).join("/")
                            def folderStructureSource = getFolderStructure(pages, pageId)
                            def targetLink = "../" * folderStructureSource.size() + folderStructureTarget + "/" + targetPage.value.filename + ".adoc"
                            if (anchor) {
                                targetLink += "#" + anchor
                            }
                            element.before(" xref:${targetLink}[${linkText}] ")
                            element.remove()
                        } else {
                            //&lt;ac:link&gt;&lt;ri:attachment ri:filename="attachment.png" ri:version-at-save="1" /&gt;&lt;/ac:link&gt;
                        }
                    }
                    break
                case "ac:plain-text-link-body":
                    // ignore, part of link
                    break
                case "ac:inline-comment-marker":
                    // ignore - not supported
                    break
                case [  "ac:layout",
                        "ac:layout-section",
                        "ac:layout-cell",
                        "ac:placeholder"
                ]:
                    // these tags are for multi column layouts and can't be easily converted
                    // ignore
                    break
                case "ac:structured-macro":
                    def macroName = element.attr("ac:name")
                    switch (macroName) {
                        case [
                                "drawio",
                                "excerpt-include",
                                "panel",
                        ]:
                            // ignore - not supported
                            break
                        case ["expand",
                              "expandable-comment",
                              ]:
                            //println "&gt;&gt;&gt; $macroName"
                            //println element
                            break;
                        case ["view-file"]:
                            def filename = element.select(["ri|attachment"]).attr("ri:filename")
                            def version = element.select(["ri|attachment"]).attr("ri:version-at-save")
                            def height = element.select("ac|parameter[ac:name=height]")?:'400'
                            def filepath = "images/"+getFolderStructure(pages, pageId).join("/")
                            filepath = "../"*getFolderStructure(pages,pageId).size()+filepath
                            if (filename.toLowerCase().endsWith('.pdf')) {
                                element.before("""
&lt;div&gt;
++++%%CRLF%%
&amp;lt;iframe name="${filename.replaceAll(":", "_")}" allowfullscreen frameborder="0" src='${filepath}/${(version ? version + "_" : "1_") + (filename.replaceAll(":", "_"))}' width='100%' height='${height}' &gt;&amp;lt;/iframe&gt;%%CRLF%%
++++%%CRLF%%
&lt;/div&gt;
""")
                            } else if (filename[-4..-1].toLowerCase() in ['.jpg', '.png']) {
                                element.before("&lt;img src='${filepath}/${(version ? version + "_" : "1_") + (filename.replaceAll(":", "_"))}'  /&gt;")
                            } else {
                                element.before("&lt;a href='${filepath}/${(version ? version + "_" : "1_") + (filename.replaceAll(":", "_"))}'  &gt;$filename&lt;/a&gt;")
                            }
                            element.remove()
                            break;
                        case 'attachments':
                            // get all attachments for the current page and insert them as link
                            // since we don't know about attachments in this method, we delegate it for later
                            element.before("%%attachments%%")
                            element.remove()
                            break
                        case 'profile':
                            def userkey = element.select("ri|user").attr("ri:userkey")
                            if (users[userkey]) {
                                element.before("""
User:: ${users[userkey].name}%%CRLF%%
// ${users[userkey].atlassianAccountId}%%CRLF%%
""")
                                element.remove()
                            }
                            break
                        case 'lucidchart':
                            def documentId = element.select("ac|parameter[ac:name=documentId]").text()
                            def localId = element.attr("ac:local-id")
                            def macroId = element.attr("ac:macro-id")
                            def lucidInfos = """
// lucidChart
// localId: ${element.attr("ac:local-id")}
// macroId: ${element.attr("ac:macro-id")}
"""
                            element.select("ac|parameter").each { parameter -&gt;
                                def pname = parameter.attr("ac:name")
                                def pvalue = parameter.text()
                                lucidInfos += "// ${pname}: ${pvalue}\n"
                            }
                            // create AsciiDoc which will be passed through
                            // only \r\n have to be encoded
                            def chart = ""
                            if (lucidChartsIframe) {

                                chart = """
++++%%CRLF%%
&amp;lt;iframe allowfullscreen frameborder="0" style="width:640px; height:480px" src="https://lucid.app/documents/embedded/${documentId}" &gt;&amp;lt;/iframe&gt;%%CRLF%%
++++%%CRLF%%
"""
                            } else {
                                def folderStructure = getFolderStructure(pages, pageId)
                                chart = """
%%CRLF%%
image::${folderStructure.join("/")}/${documentId}.png[]%%CRLF%%
%%CRLF%%
"""
                                lucidInfoFile.append("""\
images/${folderStructure.join("/")}/${documentId}.png
""".toString())
                            }
                            element.before("""
    &lt;div class="lucidchart-wrapper"&gt;
${lucidInfos.replaceAll("\n", "%%CRLF%%")}
    $chart
    https://lucid.app/lucidchart/${documentId}/edit[edit lucidchart]
    &lt;/div&gt;
    """)
                            element.remove()
                            break
                        case 'toc':
                            //ignore toc, will be generated by asciidoctor
                            element.remove()
                            break
                        case 'children':
                            //ignore, contains no content
                            element.remove()
                            break
                        case [  'tip',
                                'info',
                                'warning',
                                'note'
                        ] :
                            // admotions
                            body = element.select("ac|rich-text-body").html()
                            def type = [
                                    'info':'NOTE',
                                    'warning':'WARNING',
                                    'note': 'CAUTION',
                                    'tip':'TIP'][macroName]
                            element.html("""
    &lt;div class="admonition-wrapper"&gt;
    [${type}]%%CRLF%%
    ====%%CRLF%%
    ${body.replaceAll("&lt;h([1-9])&gt;","&lt;h\$1&gt;[discrete]")}%%CRLF%%
    ====%%CRLF%%
    &lt;/div&gt;
    """)
                            element.unwrap()
                            break
                        case 'info':
                            body = element.select("ac|rich-text-body").html()
                            def title = element.select("ac|parameter[ac:name=title]").text()
                            element.html("""
    &lt;div class="info-wrapper"&gt;
    .${title}%%CRLF%%
    ****%%CRLF%%
    ${body.replaceAll("&lt;h([1-9])&gt;","&lt;h\$1&gt;[discrete]")}%%CRLF%%
    ****%%CRLF%%
    &lt;/div&gt;
    """)
                            element.unwrap()
                            break
                        case 'anchor':
                            def anchor = element.select("ac|parameter").text()
                            element.html("\n&lt;span&gt;[[${anchor}]]&lt;span&gt;\n")
                            element.unwrap()
                            break
                        case ['code', 'paste-code-macro']:
                            def language = element.select("ac|parameter[ac:name=language]").text()
                            def code = element.select("ac|plain-text-body").text()
                            element.html("""
    &lt;div class="code-wrapper"&gt;
    [source, $language]%%CRLF%%
    ----%%CRLF%%
    ${code.replaceAll("\n","%%CRLF%%")}%%CRLF%%
    ----%%CRLF%%
    &lt;/div&gt;
    """)
                            element.unwrap()
                            break
                        default:
                            unknownTags = (unknownTags &lt;&lt; "ac:structured-macro $macroName").unique()
                            if (!unknownTagsStats["ac:structured-macro $macroName"]) {
                                unknownTagsStats["ac:structured-macro $macroName"]=[]
                            }
                            unknownTagsStats["ac:structured-macro $macroName"] &lt;&lt; pageId
                    }
                    break
                case [
                        "ac:parameter",
                        "ac:rich-text-body",
                        "ac:plain-text-body"
                ]:
                    // ignore, part of structured-macro
                    break
                default:
                    unknownTags = (unknownTags &lt;&lt; name).unique()
                    if (!unknownTagsStats[name]) {
                        unknownTagsStats[name]=[]
                    }
                    unknownTagsStats[name] &lt;&lt; pageId

            }
        }
    }
    def html = dom.html()
                // some last dirty hacks
                // add a space in front of each link
                        .replaceAll("&lt;a ", " &lt;a ")
                // some links contain /#/ which is a problem for asciidoc
                        .replaceAll("[/][#][/]", '/\\\\#/')
                // remove unneeded line breaks in headlines
                        .replaceAll("&lt;p&gt;&lt;/p&gt;&lt;strong&gt;&lt;br /&gt;", "&lt;strong&gt;")
                // remove empty bold tags
                        .replaceAll("&lt;strong&gt;&lt;br /&gt;&lt;/strong&gt;", "&lt;br /&gt;")
                // turn html titles to .-titles
                        .replaceAll("&lt;div&gt;&lt;div class=\"title\"&gt;([^&lt;]+)&lt;/div&gt;&lt;/div&gt;", ".\$1")
                // remove bold formatting and empty breaks from .-titles
                        .replaceAll("&lt;strong&gt;&lt;br /&gt;[.]([^&lt;]+)&lt;/strong&gt;", ".\$1")
    return [html, unknownTags]

}

// need to parse the entities.xml into meta data about page-structure, attachments and space
def parseMetaData( entities) {
// first parse all pages, then all contentBodies
    def pages = [:]
    def attachments = [:]
    def space = [:]
    def users = [:]
    def unknownTags = []
    println "parsing page meta-data"
    println ""

    entities.object.each { object -&gt;
        switch (object["@class"]) {
            case 'Page':
                def pageId = object.id.toString()
                def contentStatus = object.property.find { it.@name == 'contentStatus' }
                if (contentStatus == "current") {
                    def title = object.property.find { it.@name == 'title' }.text()
                    def parentId = object.property.find { it.@name == 'parent' }.text()
                    def filename = title
                                        .replaceAll("[Ää]","ae")
                                        .replaceAll("[Üü]","ue")
                                        .replaceAll("[Öö]","oe")
                                        .replaceAll("[^a-zA-Z0-9]", "_")
                                        .replaceAll("_+", "_")
                    def position = object.property.find { it.@name == 'position' }.text()
                    println "Page: " + pageId + " - " + title
                    pages[pageId] = [title: title, parentId: parentId ?: -1, filename: filename, position: position]
                }
                break
            case 'Attachment':
                def id = object.id.toString()
                def contentStatus = object.property.find { it.@name == 'contentStatus' }
                if (contentStatus == "current") {
                    def title = object.property.find { it.@name == 'title' }.text()
                    def pageId = object.property.find { it.@name == 'containerContent' }.id.text()
                    def version = object.property.find { it.@name == 'version' }.text()
                    def originalId = object.property.find { it.@name == 'originalVersion' }.id.text()
                    attachments[id] = [filename: title, id: id, version: version, pageId: pageId, originalId: originalId]
                    println "Attachment: " + id + " - " + contentStatus + " - " + title
                }
                break
            case 'ConfluenceUserImpl':
                def id = object.id.toString()
                def name = object.property.find { it.@name == 'name' }.text()
                def atlassianAccountId = object.property.find { it.@name == 'atlassianAccountId' }.text()
                users[id] = [name: name, atlassianAccountId: atlassianAccountId]
                break
            case [
                  'ContentProperty',
                  'SpacePermission',
                  'CustomContentEntityObject',
                  'Notification',
                  'Comment',
                  'OutgoingLink',
                  'Label',
                  'Labelling',
                  'User2ContentRelationEntity',
                  'Content2ContentRelationEntity',
                  'SpaceDescription',
                  'LikeEntity',
                  'BucketPropertySetItem',
                  'ContentPermission',
                  'BlogPost'
            ]:
                // ignore
                break
            case 'Space':
                space.name = object.property.find { it.@name == 'name' }.text()
                space.key = object.property.find { it.@name == 'key' }.text()
                space.homePage = object.property.find { it.@name == 'homePage' }.id.text()
                break
            case 'BodyContent':
                // will be handled later
                break
            default:
                println object["@class"]
                break

        }
    }
    if (pages[space.homePage]==null) {
        pages[space.homePage] = [:]
    }
    pages[space.homePage].parentId = 0
    return [unknownTags, pages, attachments, space, users]
}

// confluence exports attachments in a non-human readable format
// let's change this
def void copyAttachments (attachments, pages, srcDir, destDir) {
    println "copying attachments"
    attachments.each { attachmentId, attachment -&gt;
        def attachmentFile = new File(srcDir, 'attachments/' + attachment.pageId + '/' + (attachment.originalId ?: attachment.id) + "/" + attachment.version)
        def folderStructure = getFolderStructure(pages, attachment.pageId)
        def deepFilename = folderStructure.join("/")+"/"+attachment.version + "_" + (attachment.filename.replaceAll(":", "_"))
        if (folderStructure.size() &gt; 1) {
            new File(destDir, "images/" + folderStructure.join("/")).mkdirs()
        }
        def destFile = new File(new File(destDir, 'images'), deepFilename)
        try {
            Files.copy(attachmentFile.toPath(), destFile.toPath(), StandardCopyOption.REPLACE_EXISTING)
        } catch (Exception e) {
            println e.message
        }
    }
}

// get the folder structure for the current page through the page structure information
String[] getFolderStructure ( Map pages, String pageId) {
    def parentId = pages[pageId]?.parentId
    if (parentId &amp;&amp; parentId != "null" &amp;&amp; parentId != 0) {
        if (pages[parentId]) {
            return getFolderStructure(pages, parentId )  + pages[parentId].filename
        } else {
            println "parent page not found: " + parentId + " for " + pages[pageId].filename
            return []
        }
    } else {
        return []
    }
}

// extract xHTML bodies from export, convert it to HTML and then to adoc and write it to disk
def extractBodies(GPathResult entities, pages, attachments, space, users, File destDir) {
    println "extracting contentBodies"
    println ""
    def unknownTags = []
    entities.object.each { object -&gt;
        switch (object["@class"]) {
            case 'Page':
                def pageId = object.id.toString()
                def contentStatus = object.property.find { it.@name == 'contentStatus' }
                pages[pageId]?.status = ''
                if (
                           contentStatus == "current"
                        &amp;&amp; (pages[pageId].parentId != -1 || pages[pageId].parentId == space.homePage)
                ) {
                    pages[pageId].status = 'current'
                    metaData = pages[pageId]
                    def body = ""
                    object.collection.findAll { it.@name == 'bodyContents' }.each { it -&gt;
                        def id = it.element.id.text()
                        body = entities.object
                                .find { it.@class == 'BodyContent' &amp;&amp; it.id == id }
                                .property.find { it.@name == 'body' }.text()
                    }
                    def children = []
                    object.collection.findAll { it.@name == 'children' }.each { collection -&gt;
                        collection.element.each { element -&gt;
                            children &lt;&lt; element.id.text()
                        }
                    }

                    def folderStructure = getFolderStructure(pages, pageId)
                    def deepFilename = folderStructure.join("/")+"/"+metaData.filename.toString()

                    // ensure that target folder exists
                    if (folderStructure.size() &gt;= 1) {
                        new File(destDir, folderStructure.join("/")).mkdirs()
                    }
                    def outFile = new File(destDir, deepFilename + ".html")
                    // now, lets fix some body parts
                    def uTags
                    (body, uTags) = fixBody( pageId, body, users, pages, space)
                    unknownTags = (unknownTags + uTags).unique()

                    outFile.write(body, 'utf-8')

                    // convert to AsciiDoc
                    def outFilename = outFile.canonicalPath[0..-6] + ".adoc"
                    def command = "pandoc --wrap preserve -f html -t asciidoc -s ${outFile.canonicalPath} -o ${outFilename}"
                    def process = command.execute()
                    process.waitForProcessOutput(System.out, System.err)
                    if (process.exitValue()&gt;1) {
                        println "couldn't convert ${outfile.canonicalPath}"
                    } else {
                        def outFileAdoc = new File(outFilename)
                        def filename = (outFile.toString() - destDir.toString())
                        def weightedChildren = []
                        children.each { child -&gt;
                            weightedChildren &lt;&lt; [weight : ((pages[child]?.position?:"-1") as Integer),
                                                include: "include::" + pages[pageId].filename + "/" + pages[child].filename + ".adoc[levelOffset=+1]",
                                                menu   : "include::" + pages[child].filename + "/_menu.adoc[]"]
                        }
                        def childIncludes = ""
                        if (weightedChildren.size()&gt;0) {
                        childIncludes = """
    ifdef::includeChildren[]
    ${weightedChildren.sort { it.weight }.collect { it.include }.join("\n")}
    endif::includeChildren[]
    """
                        }
                        println deepFilename
                        def fileHeader = """
:jbake-menu: ${folderStructure.size()&gt;0?folderStructure[0]:'-'}
:jbake-deep-menu: ${folderStructure.join("/")}
:jbake-status: published
:jbake-type: page_custom_menu
:jbake-order: ${metaData.position?:'0'}
:jbake-root: ${"../" * (folderStructure.size() )}
:filename: ${metaData.filename.toString()}.adoc
:filepath: ${folderStructure.join("/")}
include::{jbake-root}_config.adoc[]
ifndef::imagesdir[:imagesdir: {jbake-root}images]

"""
                        // apply some last dirty fixes
                        def adoc = outFileAdoc.text
                                // fix \r\n for passed through asciidoc
                                .replaceAll("%%CRLF%% *", "\n")
                                // fix descrete headers
                                .replaceAll("(=+) \\[discrete\\]", "[discrete]\n\$1 ")
                                // nonbreaking space asciidoc style
                                .replaceAll(" ", "{nbsp}")
                                // empty headline
                                .replaceAll("(?sm)^ [+] *\$", "")
                                // filepath attribute
                                .replaceAll("%7Bfilepath%7D", "{filepath}")
                        println(pages[pageId].title)
                        def linkedAttachments = "\n"
                        if (adoc.contains('%%attachments%%')) {
                            linkedAttachments += ".Attachments\n\n"
                            attachments.findAll{it.value.pageId == pageId}.each { attachmentId, attributes -&gt;
                                linkedAttachments += "* link:${ "../" * (folderStructure.size() )}images/${folderStructure.join("/")}/" + attributes.version+"_"+attributes.filename +"["+attributes.filename+" (v${attributes.version})]\n"
                            }
                            adoc = adoc.replace('%%attachments%%', linkedAttachments)
                            linkedAttachments = "\n"
                        }
                        attachments.findAll{it.value.pageId == pageId}.each { attachmentId, attributes -&gt;
                            linkedAttachments += "// attachment /images/${folderStructure.join("/")}/" + attributes.filename +"["+attributes.filename+"]\n"
                        }
                        outFileAdoc.write(
                                        fileHeader +
                                        "== ${pages[pageId].title}\n\n" +
                                        adoc +
                                        linkedAttachments + "\n" +
                                        childIncludes,
                                        'utf-8'
                        )
                        outFile.delete()
    //                    menuFile.append("""
    //${"*" * folderStructure.size()} xref:${metaData.filename.toString()}.adoc[${pages[pageId].title}]
    //""")
                    }
                }
                break
        }
    }
    return unknownTags
}

def createMenu(pages, startPageId) {

    def pageList = pages.findAll { it.value.parentId == startPageId}
    def menu = ""
    pageList.sort{(it.value.position?:'-1') as Integer}.each { page -&gt;
        def folderStructure = getFolderStructure(pages, page.key)
        menu +=  "*"*(folderStructure.size()+1) + " xref:{jbake-root}"+folderStructure.join("/")+'/'+page.value.filename+".adoc["+page.value.title+"]\n"
        def childPageList = pages.findAll { it.value.parentId == page.key}
        if (childPageList.size()&gt;0) {
            menu += createMenu(pages, page.key)
        }
    }
    return menu
}
// this is where the main code starts
def (File srcDir, File destDir) = parseCliArgs(args)

println srcDir.canonicalPath
println destDir.canonicalPath
lucidInfoFile = new File( destDir,"lucidinfos.txt")
lucidInfoFile.write("", 'utf-8')

File inFile = new File(srcDir, "entities.xml")
def entities = new XmlSlurper().parseText(inFile.getText('utf-8'))

def (unknownTags,
        pages,
        attachments,
        space,
        users) = parseMetaData(entities)

println "Space: " + space

copyAttachments(attachments, pages, srcDir, destDir)

unknownTags &lt;&lt; extractBodies(entities, pages, attachments, space, users, destDir)
unknownTags = unknownTags.unique()

new File(destDir, '_config.adoc').write("""
++++
&lt;style&gt;
div.ulist ul {
margin-left: 1em !important;
}
&lt;/style&gt;
++++

include::_menu.adoc[]

++++
&lt;!-- endtoc --&gt;
++++

""", 'utf-8')
println ""
println "pages converted: " + pages.findAll{it.value.status=='current'}.size()
println "unknown tags found: " + unknownTags.unique()
unknownTagsStats.sort{a, b -&gt; b.value.size() &lt;=&gt; a.value.size()}.each { tag, tagpages -&gt;
    println tagpages.size().toString().padLeft(5)+" : "+tag
    tagpages.each { pageid -&gt;
        println " "*10+"- "+pages[pageid].title
    }
}

new File(destDir, '_menu.adoc').write( createMenu(pages, 0), 'utf-8')</code></pre>
</div>
</div>
</div>
</details>
</div>
</div>
</div>
        </p>

        <style>
.feedback--answer {
    display: inline-block;
}

.feedback--answer-no {
    margin-left: 1em;
}

.feedback--response {
    display: none;
    margin-top: 1em;
}

.feedback--response__visible {
    display: block;
}
</style>

<div class="d-print-none">
    <h2 class="feedback--title">Feedback</h2>
    <p class="feedback--question">Was this page helpful?</p>
    <button class="feedback--answer feedback--answer-yes">Yes</button>
    <button class="feedback--answer feedback--answer-no">No</button>
    <p class="feedback--response feedback--response-yes">
        Glad to hear it! Please <a href="https://github.com/docToolchain/docToolchain/issues/new?title=Docs%3A+Feedback+for+%27exportConfluence%27%20%F0%9F%91%8D&body=%0A%0A%5BEnter%20feedback%20here%5D%0A%0A%0A---%0A%23page:015_tasks/03_task_exportConfluence.adoc">tell us
    how we can improve</a>.
    </p>
    <p class="feedback--response feedback--response-no">
        Sorry to hear that. Please <a href="https://github.com/docToolchain/docToolchain/issues/new?title=Docs%3A+Feedback+for+%27exportConfluence%27%20%F0%9F%91%8E&body=%0A%0A%5BEnter%20feedback%20here%5D%0A%0A%0A---%0A%23page:015_tasks/03_task_exportConfluence.adoc">tell
    us how we can improve</a>.
    </p>
</div>
<script>
    const yesButton = document.querySelector('.feedback--answer-yes');
    const noButton = document.querySelector('.feedback--answer-no');
    const yesResponse = document.querySelector('.feedback--response-yes');
    const noResponse = document.querySelector('.feedback--response-no');
    const disableButtons = () => {
        yesButton.disabled = true;
        noButton.disabled = true;
    };
    const sendFeedback = (value) => {
        if (typeof ga !== 'function') return;
        const args = {
            command: 'send',
            hitType: 'event',
            category: 'Helpful',
            action: 'click',
            label: window.location.pathname,
            value: value
        };
        ga(args.command, args.hitType, args.category, args.action, args.label, args.value);
    };
    yesButton.addEventListener('click', () => {
        yesResponse.classList.add('feedback--response__visible');
        disableButtons();
        sendFeedback(1);
    });
    noButton.addEventListener('click', () => {
        noResponse.classList.add('feedback--response__visible');
        disableButtons();
        sendFeedback(0);
    });
</script>


        <br>

        <!--div class="text-muted mt-5 pt-3 border-top">Last modified July 3, 2019: <a
                href="https://github.com/google/docsy-example/commit/d6aa89c8b24089d7e6741030864eff209465e896">Added
            links to user guide repo (d6aa89c)</a>
        </div-->
    </div>


			</main>

		</div>
	</div>


	
    <!--footer class="footer mt-auto py-3 bg-light">
        <div class="container">
            <span class="text-muted">&copy; 2020 | based on <a href="https://arc42.org">arc42 7.0</a> | mixed with <a href="http://getbootstrap.com/">Bootstrap v5.0.0-beta</a> | Baked with <a href="http://jbake.org">JBake v2.6.7</a></span>
        </div>
    </footer-->

    <footer class="bg-dark py-5 row d-print-none">
        <div class="container-fluid mx-sm-5">
            <div class="row">
                <div class="col-6 col-sm-4 text-xs-center order-sm-2">


                    <ul class="list-inline mb-0">
                        
                        <li aria-label="User mailing list" class="list-inline-item mx-2 h3" data-original-title="User mailing list" data-placement="top"
                            data-toggle="tooltip" title="">
                            <a class="text-white" href="mailto:info@docs-as-co.de" rel="noopener noreferrer"
                               target="_blank">
                                <i class="fa fa-envelope"></i>
                            </a>
                        </li>
                        
                        
                        <li aria-label="Twitter" class="list-inline-item mx-2 h3" data-original-title="Twitter" data-placement="top"
                            data-toggle="tooltip" title="">
                            <a class="text-white" href="https://twitter.com/doctoolchain" rel="noopener noreferrer"
                               target="_blank">
                                <i class="fab fa-twitter"></i>
                            </a>
                        </li>
                        
                        
                        <li aria-label="Stack Overflow" class="list-inline-item mx-2 h3" data-original-title="Stack Overflow" data-placement="top"
                            data-toggle="tooltip" title="">
                            <a class="text-white" href="https://stackoverflow.com/questions/tagged/doctoolchain" rel="noopener noreferrer"
                               target="_blank">
                                <i class="fab fa-stack-overflow"></i>
                            </a>
                        </li>
                        
                    </ul>


                </div>
                <div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">


                    <ul class="list-inline mb-0">

                        
                        <li aria-label="GitHub" class="list-inline-item mx-2 h3" data-original-title="GitHub" data-placement="top"
                            data-toggle="tooltip" title="">
                            <a class="text-white" href="https://github.com/doctoolchain/doctoolchain" rel="noopener noreferrer"
                               target="_blank">
                                <i class="fab fa-github"></i>
                            </a>
                        </li>
                        

                        


                    </ul>


                </div>
                <div class="col-12 col-sm-4 text-center py-2 order-sm-2">

                        <small class="text-white">built with <a href="https://doctoolchain.org">docToolchain</a> and <a href="https://jbake.org">jBake</a> <br /> theme: <a href="https://www.docsy.dev/">docsy</a></small>

                </div>
            </div>
        </div>
    </footer>

    <script src="../js/popper.min.js"></script>
    <script src="../js/bootstrap.min.js"></script>


    <script src="../js/main.min.b5fc1b29d2465835844254bd4d804738eaf24c0cec53009b4c6899989be55a47.js"></script>
    <script src="../js/blocks.js" ></script>
    <script src="../js/prettify.js"></script>
    <script src="../js/copy-n-paste.js"></script>
    <script src="../js/submenucollapse.js"></script>


</body>
</html>
