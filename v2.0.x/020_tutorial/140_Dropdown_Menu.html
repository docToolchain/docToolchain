<!doctype html>
<html lang="de">
<head>
    
    <!-- sourceuri: 020_tutorial/140_Dropdown_Menu.html -->
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">

    <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
    <meta content="jbake" name="generator">
    <meta content="INDEX, FOLLOW" name="ROBOTS">

    <title>How to create a Dropdown Menu</title>
    <meta content="docToolchain" property="og:title">
    <meta content="build your dev docs the easy way..." property="og:description">
    <meta content="website" property="og:type">
    <meta content="docToolchain" property="og:site_name">
    <meta content="docToolchain" itemprop="name">
    <meta content="build your dev docs the easy way..." itemprop="description">
    <meta content="summary" name="twitter:card">
    <meta content="docToolchain" name="twitter:title">
    <meta content="build your dev docs the easy way..." name="twitter:description">

    <link as="style"
        href="../css/main.min.881fe5f7b53609f55ebfb496c7097c3b30b2e8ceb20a54bc6a48350ded67224f.css"
        rel="preload">
    <link href="../css/main.min.881fe5f7b53609f55ebfb496c7097c3b30b2e8ceb20a54bc6a48350ded67224f.css"
        integrity=""
        rel="stylesheet">
    <link href="../css/asciidoctor.css" rel="stylesheet">
    <link href="../css/prettify.css" rel="stylesheet">

    <!-- favicon generated with https://www.favicon-generator.org/ -->
    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="apple-touch-icon" sizes="57x57" href="../apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="../apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="../apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="../apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="../apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="../apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="../apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="../apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="../apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192" href="../android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
    <link rel="manifest" href="../manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="../ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">

    <script src="../js/jquery-3.5.1.min.js"></script>
    <style>
    div.bg-light {
        background-color: rgba(127, 180, 224, 0.3) !important;
    }

    /* for blog posts */
    span.blogtag {
        border-radius: 10px;
        background-color: #30638E;
        color: white;
        padding: 5px 10px;
    }

    span.blogblogtag a {
        color: white;
        padding: 0
    }

    span.blogtag span {
        margin-left: 10px;
        border-radius: 10px;
        background-color: white;
        color: #30638E;
    }

    div.td-toc {
        height: calc(100vh - 5rem) !important;
    }

    div#toctitle {
        display: none
    }

    #td-section-nav {
        max-height: calc(100vh - 4rem);
        font-size: smaller;
        line-height: 1.1;
    }

    .td-page-meta {
        font-size: smaller;
        line-height: 1.1;
    }

    #td-section-nav ul.td-sidebar-nav__section {
        padding-left: 0;
    }

    span.navbar-logo {
        padding-right: 1.5em;
    }

    .match {
        font-size: smaller;
    }

    .admonitionblock td.icon .fa:before {
        font-size: xxx-large;
    }
    </style>

    <style>
    div.openblock.primary div.content, div.openblock.secondary div.content {
        border: 1px solid #7a2518;
        padding: 5px;
    }

    div.openblock.primary div.content div.content, div.openblock.secondary div.content div.content {
        border: 0 solid #7a2518;
        padding: 0;
    }

    .hidden {
        display: none;
    }

    .switch {
        border-width: 1px 1px 0 1px;
        border-style: solid;
        border-color: #7a2518;
        display: inline-block;
    }

    .switch--item {
        padding: 2px 10px;
        background-color: #ffffff;
        color: #7a2518;
        display: inline-block;
        cursor: pointer;
    }

    .switch--item:not(:first-child) {
        border-width: 0 0 0 1px;
        border-style: solid;
        border-color: #7a2518;
    }

    .switch--item.selected {
        background-color: #7a2519;
        color: #ffffff;
    }
    </style>

    <!-- copy-n-paste.js -->
    <style>
        div.listingblock {
            position: relative;
        }
        div.listingblock > span.icon {
            position: absolute;
            top: 2px;
            right: 6px;
            visibility: hidden;
            z-index: 2;
            cursor: pointer;
        }
        div.listingblock:hover > span.icon {
            visibility: visible;
        }
        div.listingblock div.content pre {
            margin: 0;
        }
    </style>
    <style>
        .td-sidebar-nav__section {
            padding-left: 9px;
        }
        details {
            margin-left: 10px;
        }
        summary {
            cursor: pointer;
            padding-left: 10px; /* Erhöhter linker Padding für den Pfeil */
            list-style: none;
            position: relative; /* Für absolute Positionierung des Pfeils */
        }
        summary::before {
            content: '>';
            position: absolute;
            left: 10px; /* Position des Pfeils */
            top: 50%;
            transform: translateY(-50%) translateX(-120%);
            transition: transform 0.3s;
        }
        details[open] > summary::before {
            transform: translateY(-50%) translateX(-120%) rotate(90deg);
        }
    </style>
</head>

<body onload="prettyPrint()" class="td-section">
<header>
	
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
    <a class="navbar-brand" href="../index.html">
        <span class="navbar-logo"><img src="../images/doctoolchain-logo-blue.png" alt="docToolchain" width="32px" /></span><span
            class="font-weight-bold">docToolchain</span>
    </a>
    <div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
        <ul class="navbar-nav mt-2 mt-lg-0">
    <li class="nav-item mr-4 mb-2 mb-lg-0"><!--img src="../images/status.png" alt="status" width="16" height="16" onerror="this.style.display='none'"--></li>

            <li class="nav-item mr-4 mb-2 mb-lg-0">
                <a class="nav-link " href="../10_about/10_about-the-project.html"><span>About</span></a>
            </li>

            <li class="nav-item mr-4 mb-2 mb-lg-0">
                <a class="nav-link " href="../010_manual/20_install.html"><span>User Docs</span></a>
            </li>

            <li class="nav-item mr-4 mb-2 mb-lg-0">
                <a class="nav-link " href="../015_tasks/03_tasks.html"><span>Tasks</span></a>
            </li>

            <li class="nav-item mr-4 mb-2 mb-lg-0">
                <a class="nav-link active" href="../020_tutorial/010_Install.html"><span>Tutorial</span></a>
            </li>

            <li class="nav-item mr-4 mb-2 mb-lg-0">
                <a class="nav-link " href="../025_development/005_contributing_to_docs.html"><span>For Devs</span></a>
            </li>

            <li class="nav-item mr-4 mb-2 mb-lg-0">
                <a class="nav-link " href="../030_news/index.html"><span>News</span></a>
            </li>

        </ul>
    </div>
    <div class="navbar-nav d-none d-lg-block" >
        <form action="../search.html">
        <input aria-label="Search this site…" autocomplete="off" class="form-control td-search-input"
               placeholder=" Search this site…" type="search" name="q">
        </form>
    </div>
</nav>

</header>
<div class="container-fluid td-outer">
	<div class="td-main">
		<div class="row flex-xl-nowrap">
			<div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
				<div class="td-sidebar__inner" id="td-sidebar-menu" >
					

        <form class="td-sidebar__search d-flex align-items-center d-lg-none" action="../search.html">

            <input aria-label="Search this site…" name="q" autocomplete="off" class="form-control td-search-input"
                   placeholder=" Search this site…" type="search">


            <button aria-controls="td-docs-nav" aria-expanded="false"
                    aria-label="Toggle section navigation" class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" data-target="#td-section-nav"
                    data-toggle="collapse" type="button">
            </button>
        </form>

        <nav aria-label="Submenu" class="collapse td-sidebar-nav" id="td-section-nav" >

            <ul class="td-sidebar-nav__section">
                <li class="td-sidebar-nav__section-title">
                    <span class="align-left pl-0 pr-2 pt-2 active td-sidebar-link td-sidebar-link__section">Tutorial</span>
                </li>
                <li>
                  <ul>
                      <li class="collapse show" id="docs">
                          
                        <ul class="td-sidebar-nav__section ul-0">
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../020_tutorial/010_Install.html" title="Install docToolchain">Install docToolchain</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../020_tutorial/020_arc42.html" title="arc42 Template">arc42 Template</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../020_tutorial/030_generateHTML.html" title="generateHTML &amp; generatePDF">generateHTML &amp; generatePDF</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../020_tutorial/040_microsite/index.html" title="Microsite">Microsite</a>
                                
                        <ul class="ul-1">
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../020_tutorial/040_microsite/040_generateSite.html" title="generateSite">generateSite</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../020_tutorial/040_microsite/043_multi-markup.html" title="generateSite: Multi-Markup">generateSite: Multi-Markup</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../020_tutorial/040_microsite/130_theming.html" title="How to change the theme">How to change the theme</a>
                                
                            </li>
                        </ul></details>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../020_tutorial/050_multipleRepositories.html" title="Multi-Repo">Multi-Repo</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../020_tutorial/070_publishToConfluence.html" title="publishToConfluence">publishToConfluence</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../020_tutorial/100_diagrams.net.html" title="Diagrams: Diagrams.net">Diagrams: Diagrams.net</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../020_tutorial/110_presentations_with_revealjs.html" title="Presentations with reveal.js">Presentations with reveal.js</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../020_tutorial/120_self-contained-dtc.html" title="Self-Contained docToolchain">Self-Contained docToolchain</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section active"
                                   href="../020_tutorial/140_Dropdown_Menu.html" title="How to create a Dropdown Menu">How to create a Dropdown Menu</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../020_tutorial/150_multiRepoMicrositeTipsAndTricks.html" title="Building a microsite from multiple repositories">Building a microsite from multiple repositories</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../020_tutorial/160_EnterpriseTipsAndTricks.html" title="Enterprise docToolchain">Enterprise docToolchain</a>
                                
                            </li>
                            <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child">
                                <a class="align-left pl-0 pr-2 pt-2 td-sidebar-link td-sidebar-link__section "
                                   href="../020_tutorial/990_Tutorial.html" title="How to create a Tutorial">How to create a Tutorial</a>
                                
                            </li>
                        </ul>
                      </li>
                  </ul>
                <li>
        </nav>

				</div>
			</div>
			<div class="d-none d-xl-block col-xl-2 td-toc d-print-none">
				<div class="td-page-meta ml-2 pb-1 pt-2 mb-0">
					

        <a href="https://github.com/doctoolchain/doctoolchain/edit/ng/src/docs/020_tutorial/140_Dropdown_Menu.adoc"
           target="_blank"><i class="fa fa-edit fa-fw"></i> Improve this doc</a>


        <a href="https://github.com/docToolchain/docToolchain/issues/new?title=Docs%3A+Feedback+for+%27How+to+create+a+Dropdown+Menu%27&body=%0A%0A%5BEnter%20feedback%20here%5D%0A%0A%0A---%0A%23page:%20https://github.com/doctoolchain/doctoolchain/edit/ng/src/docs/020_tutorial/140_Dropdown_Menu.adoc%0A%23branch:%20ng" target="_blank"><i
                class="fab fa-github fa-fw"></i> Create an issue</a>

        
        
        <hr />
<script>
const issuesBaseUrl = "https://api.github.com/repos/doctoolchain/doctoolchain/issues";
const searchTerm = "020_tutorial/140_Dropdown_Menu.adoc";
</script>

<script src="../js/issues.js"></script>

<style>
        #issues-container {
            background-color: white;
            padding: 0px;
            margin: 0;
        }
        .issue {
            display: flex;
            align-items: flex-start;
            margin-bottom: 5px;
            padding-bottom: 5px;
            border-bottom: 1px solid #eee;
        }
        .issue:last-child {
            border-bottom: none;
        }
        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin-right: -10px;
        }
        .issue-content {
            flex-grow: 1;
            background-color: rgba(255,255,255,0.6);
        }
        .issue-title {
            font-weight: bold;
            color: #0366d6;
        }
        .issue-date {
            font-size: 0.9em;
            color: #586069;
        }

</style>

<div id="issues-container">
searching issues...
</div>

        <hr />

        <div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_how_to_set_up_a_dropdown_menu_for_a_microsite">How to set up a Dropdown Menu for a Microsite</a>
<ul class="sectlevel2">
<li><a href="#_folder_structure">Folder Structure</a></li>
<li><a href="#_markers">Markers</a></li>
<li><a href="#_menu_generation">Menu Generation</a></li>
<li><a href="#_caveats">Caveats</a></li>
</ul>
</li>
</ul>
</div>




				</div>
			</div>
			<main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
				    <nav aria-label="breadcrumb" class="d-none d-md-block d-print-none">
        <ol class="breadcrumb spb-1">
            <!--li aria-current="page" class="breadcrumb-item active">
                <a href="https://example.docsy.dev/docs/">Documentation</a>
            </li-->

        </ol>
    </nav>


    <div class="td-content">
        <p>
            
<div class="sect1">
<h2 id="_how_to_set_up_a_dropdown_menu_for_a_microsite">How to set up a Dropdown Menu for a Microsite</h2>
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you don&#8217;t need to understand what&#8217;s going on, there is a shortcut:
Just look at the <a href="https://github.com/docToolchain/docToolchain/pull/1318/commits">commits</a> in
<a href="https://github.com/docToolchain/docToolchain/pull/1318">this PR</a>
(<a href="https://deploy-preview-1318&#8212;&#8203;dtc-docs-preview.netlify.app/">preview</a>)
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The microsite generated by docToolchain groups your documentation along two axes:
the top menu and the left sidebar.
The top menu lists several menu items that each correspond to a different asciidoc <code>page</code>.
And each page comprises several chapters that you can navigate in the left sidebar.
If you want to group several pages you need an intermediary axis.
This axis can be realized with a dropdown menu.
There is no syntax within docToolchain to create a dropdown and assign (several) pages to menu items,
but we can tweak the html generation to create a dropdown for us.
The result will look like this:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/140_dropdown_result.png" alt="140 dropdown result">
</div>
</div>
<div class="paragraph">
<p>In the following we will use this terminology:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">menu item</dt>
<dd>
<p>Entries (or their String values) on the blue top menu bar (e.g. 'backend')</p>
</dd>
<dt class="hdlist1">dropdown item</dt>
<dd>
<p>Entries in a dropdown list, e.g. 'business', 'arc42', 'how-to' in the picture above</p>
</dd>
</dl>
</div>
<div class="sect2">
<h3 id="_folder_structure">Folder Structure</h3>
<div class="paragraph">
<p>The folders are arranged as usual: one folder per page.
We use prefixes (e.g. <code>general_</code>) to group pages that should end up in the same dropdown,
but this is not technically required, it just helps us to stay on top of things.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>.
├── docToolchainConfig.groovy
├── dtcw
└── src
   └── docs
       ├── general_arc42
       │   ├── page1.adoc
       │   ...
       ├── general_business
       ├── general_how_to
       ├── backend_arc42
       ├── backend_business
       ├── backend_how_to
       ...</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_markers">Markers</h3>
<div class="paragraph">
<p>By default, the <code>menu</code> field in <code>docToolchainConfig.groovy</code> maps folder names to item names.
It also implicitly encodes</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>the order in which menu items are displayed</p>
</li>
<li>
<p>the actual value that is displayed in the top menu</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Here, it will additionally encode</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>the menu entry a page belongs to</p>
</li>
<li>
<p>the order of a page within a dropdown</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>In order to accomplish that, we&#8217;ll put both the menu item and the dropdown item in every right side value.
The format for that is <code>"&lt;menu item name&gt;: &lt;dropdown item name&gt;"</code>.
If a value does not contain <code>": "</code> it will be interpreted as a regular menu item linked to one page.</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
This means that your menu (or dropdown) items cannot contain <code>": "</code> in their name.
If you need <code>": "</code> as part of the menu or dropdown item, you can use a different separator.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Look at the following example.
The first three entries will create a menu item "general" with three dropdown items "arc42", "business" and "how-to" (in that order).
The last entry "blog" will create a regular menu item with no dropdown.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="groovy">    menu = [
            general_arc42:    'general: arc42',
            general_business: 'general: business',
            general_how_to:   'general: how-to',
            backend_arc42:    'backend: arc42',
            backend_business: 'backend: business',
            backend_how_to:   'backend: how-to',
            // ...
            blog:   'blog'
    ]</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_menu_generation">Menu Generation</h3>
<div class="paragraph">
<p>To make docToolchain create the dropdown for us, we need to apply some changes to the default theme.
So, if not done already, we need to download the <code>site</code> folder with <code>dtcw</code> <a href="130_theming.html"><code>copyThemes</code></a>.</p>
</div>
<div class="listingblock">
<div class="title">default menu generation</div>
<div class="content">
<pre class="prettyprint highlight"><code data-lang="gsp">&lt;%
        content.newEntries.each { entry -&gt;
%&gt;
            &lt;li class="nav-item mr-4 mb-2 mb-lg-0"&gt;
                &lt;a class="nav-link ${entry.isActive}" href="${entry.href}"&gt;&lt;span&gt;${entry.title}&lt;/span&gt;&lt;/a&gt;
            &lt;/li&gt;
&lt;%
        }
%&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the example above <code>&lt;% &#8230;&#8203; %&gt;</code> are used to embed groovy code into pages that are otherwise html.
Here a for-each loop is embedded to generate a <em>list item</em> element for every element in <code>content.newEntries</code>.
The <code>content.newEntries</code> field has the information from the <code>menu</code> field where earlier we added the information about which menu item each page should go under.
Now we need to extract the information about which dropdowns there are and which pages go where.
First, we&#8217;ll add some imports that we&#8217;ll need later.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="groovy">    import static java.util.stream.Collectors.groupingBy
    import static java.util.stream.Collectors.mapping
    import static java.util.stream.Collectors.toList</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then, we&#8217;ll assert that our assumption still holds: <code>content.newEntries</code> is an <code>ArrayList</code> of <code>LinkedHashMap</code> s.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="groovy">    assert content.newEntries instanceof java.util.ArrayList
    assert (content.newEntries.size() == 0) || content.newEntries[0] instanceof java.util.LinkedHashMap</code></pre>
</div>
</div>
<div class="paragraph">
<p>After verifying the type of the input, let&#8217;s transform it to a class that we define, <code>Item</code>.
Having their definition in view will make it easier to work with them later on.
We&#8217;ll also define a transformation from a <code>LinkedHashMap</code> to our <code>Item</code> that drops the menu item from combined titles where we had added them before.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="groovy">    //a custom class for dropdown items
    class Item {
        boolean isActive
        String href
        String title
        Item(isActive, href, title) {
            this.isActive = isActive
            this.href = href
            this.title = title
        }
    };

    //Transform a LinkedHashMap to an Item.
    //if the title is a combination of menu item and dropdown item, drop the menu item.
    def transform(e) {
        var title = e.title.contains(": ")
                  ? e.title.split(": ")[1]
                  : e.title
        new Item(e.isActive, e.href, title)
    }</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
There are some newer groovy (server pages) features around like <a href="https://gsp.grails.org/latest/ref/Tags/each.html">&lt;g:each &#8230;&#8203;&gt; elements</a> and <a href="https://groovy.apache.org/blog/groovy-records">records</a>.
I could not make them work<sup class="footnote">[<a id="_footnoteref_1" class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup> and ended up using the old concepts.
If you find a way to apply them feel free to verify it by building on <a href="https://github.com/docToolchain/docToolchain/pull/1318">this PR</a> and update this tutorial!
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In order to group pages by menu item, we need to define a key function.
The key function should always return the menu item.
So, from a combined title, just the menu item should be returned and the dropdown item be dropped.
And from a regular item the whole title should be returned.
But we still want to preserve the information about whether to create a dropdown.
Thus, we add a marker prefix in front of the key for dropdown items.
(Instead of the marker prefix we could also just interpret map entries where the value is a one element list as not-a-dropdown.
But then we couldn&#8217;t support dropdowns with exactly one element and somebody might want that.)</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="groovy">    MARKER_DROPDOWN = "dropdownmenuitem_"

    //get the menu item from a combined title. If there is no separator get the full title.
    def getMenuItem(e) {
        e.title.contains(": ")
                  ? MARKER_DROPDOWN + e.title.split(": ")[0]
                  :                   e.title
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now we can group the pages to a map where the key is the menu item (plus an indicator prefix iff // == "if and only if"
a dropdown should be created) and the value is a list of <code>Items</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="groovy">    var LinkedHashMap&lt;String, List&lt;Item&gt;&gt; itemGroups
    itemGroups = content.newEntries.stream()
                                   .collect(
                                       groupingBy(
                                           this::getMenuItem,
                                           LinkedHashMap::new,
                                           mapping(this::transform, toList())
                                       )
                                   )</code></pre>
</div>
</div>
<div class="paragraph">
<p>After enriching the original <code>content.newEntries</code> map with dropdown information and making that information accessible,
we can now generate the menu from it.
So we&#8217;ll add an <code>if</code> to the existing for-each loop, that distinguishes between regular menu items and those with a dropdown.
For a dropdown, we place a button (so one can click on it and have the dropdown items displayed) and a <code>div</code> with all the dropdown items.
For a regular menu item, everything stays the same.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="html">    itemGroups.each { key, val -&gt;
        if (key.startsWith(MARKER_DROPDOWN)) {
            //dropdown
%&gt;
            &lt;li class="nav-item mr-4 mb-2 mb-lg-0"&gt;
                &lt;div class="dropdown"&gt;
                    &lt;button class="dropbtn"&gt;&lt;span&gt;${key.minus(MARKER_DROPDOWN)}&lt;/span&gt;&lt;/button&gt;
                    &lt;div class="dropdown-content"&gt;
&lt;%
            val.each { item -&gt;
%&gt;
                        &lt;a href="${item.href}"&gt;${item.title}&lt;/a&gt;
&lt;%
            }
%&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
            &lt;/li&gt;
&lt;%
        } else {
            //there is no dropdown, take the only element
            entry = val.get(0)
%&gt;
            &lt;li class="nav-item mr-4 mb-2 mb-lg-0"&gt;
                &lt;a class="nav-link ${entry.isActive}" href="${entry.href}"&gt;&lt;span&gt;${entry.title}&lt;/span&gt;&lt;/a&gt;
            &lt;/li&gt;
&lt;%
        }
    }
%&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now we have all the structural information, and if we generate a microsite now, we can see all the dropdown items.
But, we only want to see them on a mouse over, so we&#8217;ll have to add some CSS as well.
For that we&#8217;ll just add another <code>style</code> element to <code>header.gsp</code>.</p>
</div>
<div class="paragraph">
<p>For basic functionality, we just need to set <code>display</code> to <code>none</code> unless there is a mouseover.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="css">    &lt;!-- dropdown menu --&gt;
    &lt;style&gt;

         /* Dropdown Content (Hidden by Default) */
         .dropdown-content {
           display: none;
           position: absolute;
           background-color: #f1f1f1;
           min-width: 160px;
           box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
           z-index: 1;
         }

         /* Show the dropdown menu on hover */
         .dropdown:hover .dropdown-content {display: block;}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now all that&#8217;s left is some styling to seamlessly integrate the dropdown to the rest of the page.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="css">         /* The container &lt;div&gt; - needed to position the dropdown content */
         .dropdown {
           position: relative;
           display: inline-block;
         }

         /* Dropdown Button */
         .dropbtn {
           background-color: #30638E;
           color: white;
           padding: 10px;
           font-size: 16px;
           border: none;
         }

         /* Links inside the dropdown */
         .dropdown-content a {
           color: black;
           padding: 12px 16px;
           text-decoration: none;
           display: block;
         }

         /* analogous to the `.td-navbar .nav-link` block*/
         .td-navbar .dropbtn {
           text-transform:none;
           font-weight:700;
         }

         /* Change color of dropdown links on hover */
         .dropdown-content a:hover {background-color: #ddd;}

         /* Change the background color of the dropdown button when the dropdown content is shown */
         .dropdown:hover .dropbtn {background-color: #5579ae;}

    &lt;/style&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>With that, we have added a dropdown to the top menu and didn&#8217;t have to add any new features to docToolchain.</p>
</div>
</div>
<div class="sect2">
<h3 id="_caveats">Caveats</h3>
<div class="paragraph">
<p>The fact that there is no <em>structural</em> support<sup class="footnote">[<a id="_footnoteref_2" class="footnote" href="#_footnotedef_2" title="View footnote.">2</a>]</sup> for dropdowns in docToolchain is noticeable in some places.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The folder structure (in <code>docs</code>) is flat, folders of dropdown and menu items are on the same level.</p>
</li>
<li>
<p>The URLs in turn are not as one might expect <code>&#8230;&#8203;/menu_item/dropdown_item/page</code> but <code>&#8230;&#8203;/menu_item_dropdown_item/page</code>.</p>
</li>
<li>
<p>For regular pages the top entry in the left sidebar is the name of the menu item,
but for pages of dropdowns the top entry on the left is the value specified in <code>menu.gsp</code> in the field <code>menu</code>:
<code>&lt;menu item&gt;: &lt;dropdown item&gt;</code>.
(This behaviour can in all likelihood be changed by adding a command in the right <code>.gsp</code> file)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These points are probably not an issue for most people, but for transparency they are listed here.</p>
</div>
</div>
</div>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. 1) <code>&lt;g:xy&gt;</code> elements are not recognized, I guess the 'g' namespace isn&#8217;t. 2a) <code>record Point(int x, int y, String color) { }</code> gives <code>Unexpected input: '('</code> 2b) <code>@RecordType class</code> gives <code>SimpleTemplateScript &#8230;&#8203; unable to resolve annotation RecordType</code>
</div>
<div class="footnote" id="_footnotedef_2">
<a href="#_footnoteref_2">2</a>. we are basically telling docToolchain to treat some menu items, which we labeled as dropdown items, differently from the rest.
</div>
</div>
        </p>

        <style>
.feedback--answer {
    display: inline-block;
}

.feedback--answer-no {
    margin-left: 1em;
}

.feedback--response {
    display: none;
    margin-top: 1em;
}

.feedback--response__visible {
    display: block;
}
</style>

<div class="d-print-none">
    <h2 class="feedback--title">Feedback</h2>
    <p class="feedback--question">Was this page helpful?</p>
    <button class="feedback--answer feedback--answer-yes">Yes</button>
    <button class="feedback--answer feedback--answer-no">No</button>
    <p class="feedback--response feedback--response-yes">
        Glad to hear it! Please <a href="https://github.com/docToolchain/docToolchain/issues/new?title=Docs%3A+Feedback+for+%27How+to+create+a+Dropdown+Menu%27%20%F0%9F%91%8D&body=%0A%0A%5BEnter%20feedback%20here%5D%0A%0A%0A---%0A%23page:020_tutorial/140_Dropdown_Menu.adoc">tell us
    how we can improve</a>.
    </p>
    <p class="feedback--response feedback--response-no">
        Sorry to hear that. Please <a href="https://github.com/docToolchain/docToolchain/issues/new?title=Docs%3A+Feedback+for+%27How+to+create+a+Dropdown+Menu%27%20%F0%9F%91%8E&body=%0A%0A%5BEnter%20feedback%20here%5D%0A%0A%0A---%0A%23page:020_tutorial/140_Dropdown_Menu.adoc">tell
    us how we can improve</a>.
    </p>
</div>
<script>
    const yesButton = document.querySelector('.feedback--answer-yes');
    const noButton = document.querySelector('.feedback--answer-no');
    const yesResponse = document.querySelector('.feedback--response-yes');
    const noResponse = document.querySelector('.feedback--response-no');
    const disableButtons = () => {
        yesButton.disabled = true;
        noButton.disabled = true;
    };
    const sendFeedback = (value) => {
        if (typeof ga !== 'function') return;
        const args = {
            command: 'send',
            hitType: 'event',
            category: 'Helpful',
            action: 'click',
            label: window.location.pathname,
            value: value
        };
        ga(args.command, args.hitType, args.category, args.action, args.label, args.value);
    };
    yesButton.addEventListener('click', () => {
        yesResponse.classList.add('feedback--response__visible');
        disableButtons();
        sendFeedback(1);
    });
    noButton.addEventListener('click', () => {
        noResponse.classList.add('feedback--response__visible');
        disableButtons();
        sendFeedback(0);
    });
</script>


        <br>

        <!--div class="text-muted mt-5 pt-3 border-top">Last modified July 3, 2019: <a
                href="https://github.com/google/docsy-example/commit/d6aa89c8b24089d7e6741030864eff209465e896">Added
            links to user guide repo (d6aa89c)</a>
        </div-->
    </div>


			</main>

		</div>
	</div>


	
    <!--footer class="footer mt-auto py-3 bg-light">
        <div class="container">
            <span class="text-muted">&copy; 2020 | based on <a href="https://arc42.org">arc42 7.0</a> | mixed with <a href="http://getbootstrap.com/">Bootstrap v5.0.0-beta</a> | Baked with <a href="http://jbake.org">JBake v2.6.7</a></span>
        </div>
    </footer-->

    <footer class="bg-dark py-5 row d-print-none">
        <div class="container-fluid mx-sm-5">
            <div class="row">
                <div class="col-6 col-sm-4 text-xs-center order-sm-2">


                    <ul class="list-inline mb-0">
                        
                        <li aria-label="User mailing list" class="list-inline-item mx-2 h3" data-original-title="User mailing list" data-placement="top"
                            data-toggle="tooltip" title="">
                            <a class="text-white" href="mailto:info@docs-as-co.de" rel="noopener noreferrer"
                               target="_blank">
                                <i class="fa fa-envelope"></i>
                            </a>
                        </li>
                        
                        
                        <li aria-label="Twitter" class="list-inline-item mx-2 h3" data-original-title="Twitter" data-placement="top"
                            data-toggle="tooltip" title="">
                            <a class="text-white" href="https://twitter.com/doctoolchain" rel="noopener noreferrer"
                               target="_blank">
                                <i class="fab fa-twitter"></i>
                            </a>
                        </li>
                        
                        
                        <li aria-label="Stack Overflow" class="list-inline-item mx-2 h3" data-original-title="Stack Overflow" data-placement="top"
                            data-toggle="tooltip" title="">
                            <a class="text-white" href="https://stackoverflow.com/questions/tagged/doctoolchain" rel="noopener noreferrer"
                               target="_blank">
                                <i class="fab fa-stack-overflow"></i>
                            </a>
                        </li>
                        
                    </ul>


                </div>
                <div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">


                    <ul class="list-inline mb-0">

                        
                        <li aria-label="GitHub" class="list-inline-item mx-2 h3" data-original-title="GitHub" data-placement="top"
                            data-toggle="tooltip" title="">
                            <a class="text-white" href="https://github.com/doctoolchain/doctoolchain" rel="noopener noreferrer"
                               target="_blank">
                                <i class="fab fa-github"></i>
                            </a>
                        </li>
                        

                        


                    </ul>


                </div>
                <div class="col-12 col-sm-4 text-center py-2 order-sm-2">

                        <small class="text-white">built with <a href="https://doctoolchain.org">docToolchain</a> and <a href="https://jbake.org">jBake</a> <br /> theme: <a href="https://www.docsy.dev/">docsy</a></small>

                </div>
            </div>
        </div>
    </footer>

    <script src="../js/popper.min.js"></script>
    <script src="../js/bootstrap.min.js"></script>


    <script src="../js/main.min.b5fc1b29d2465835844254bd4d804738eaf24c0cec53009b4c6899989be55a47.js"></script>
    <script src="../js/blocks.js" ></script>
    <script src="../js/prettify.js"></script>
    <script src="../js/copy-n-paste.js"></script>
    <script src="../js/submenucollapse.js"></script>


</body>
</html>
